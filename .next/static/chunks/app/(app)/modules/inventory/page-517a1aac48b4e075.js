(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[558],{9983:function(e,t,n){Promise.resolve().then(n.bind(n,831))},831:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(7437),a=n(16),s=n(2265),l=n(2533),i=n(1304),o=n(3340),c=n(1119);function d(){let{currentSite:e}=(0,o.a)(),t=(null==e?void 0:e.id)||"",{data:n=[]}=(0,a.a)({queryKey:["/api/inventory/items"]}),{data:d=[]}=(0,a.a)({queryKey:["/api/inventory/locations?siteId=".concat(t)],enabled:!!t}),{data:u=[]}=(0,a.a)({queryKey:["/api/inventory/events?siteId=".concat(t)],enabled:!!t}),{data:f=[]}=(0,a.a)({queryKey:["/api/inventory/balances?siteId=".concat(t)],enabled:!!t}),[m,h]=(0,s.useState)(0),x=new Date().toDateString(),v=u.filter(e=>new Date(e.createdAt).toDateString()===x).length;return(0,s.useEffect)(()=>{h((0,c.Sg)().filter(e=>"queued"===e.status).length)},[]),(0,r.jsxs)("div",{className:"flex h-full flex-col",children:[(0,r.jsx)(l.L,{}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col gap-6 p-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Inventory Dashboard"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Overview of inventory activity and master data."})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[(0,r.jsxs)(i.Zb,{children:[(0,r.jsx)(i.Ol,{children:(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Total SKUs"})}),(0,r.jsx)(i.aY,{className:"text-2xl font-semibold",children:n.length})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsx)(i.Ol,{children:(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Total Locations"})}),(0,r.jsx)(i.aY,{className:"text-2xl font-semibold",children:d.length})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsx)(i.Ol,{children:(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Events Today"})}),(0,r.jsx)(i.aY,{className:"text-2xl font-semibold",children:v})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsx)(i.Ol,{children:(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Balance Rows"})}),(0,r.jsx)(i.aY,{className:"text-2xl font-semibold",children:f.length})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsx)(i.Ol,{children:(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Queued Events"})}),(0,r.jsx)(i.aY,{className:"text-2xl font-semibold",children:m})]})]}),(0,r.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:(0,r.jsxs)(i.Zb,{children:[(0,r.jsx)(i.Ol,{children:(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Station Mode"})}),(0,r.jsxs)(i.aY,{className:"grid gap-3 text-sm",children:[(0,r.jsx)("a",{className:"text-primary hover:underline",href:"/stations/receiving",children:"Receiving Station"}),(0,r.jsx)("a",{className:"text-primary hover:underline",href:"/stations/stockroom",children:"Stockroom / Kitting Station"}),(0,r.jsx)("a",{className:"text-primary hover:underline",href:"/stations/pleater1",children:"Pleater 1 Station"}),(0,r.jsx)("a",{className:"text-primary hover:underline",href:"/stations/packing",children:"Packing / Shipping Station"})]})]})})]})]})}function u(){return(0,r.jsx)(d,{})}},2533:function(e,t,n){"use strict";n.d(t,{L:function(){return o}});var r=n(7437),a=n(7648),s=n(9376),l=n(1216);let i=[{label:"Dashboard",href:"/modules/inventory"},{label:"Items",href:"/modules/inventory/items"},{label:"Locations",href:"/modules/inventory/locations"},{label:"Balances",href:"/modules/inventory/balances"},{label:"Events",href:"/modules/inventory/events"},{label:"Reason Codes",href:"/modules/inventory/reason-codes"}];function o(){let e=(0,s.usePathname)();return(0,r.jsx)("div",{className:"flex flex-wrap gap-2 border-b px-6 pt-4",children:i.map(t=>{let n=e===t.href;return(0,r.jsx)(a.default,{href:t.href,className:(0,l.cn)("inline-flex items-center rounded-md px-3 py-2 text-sm font-medium",n?"bg-accent text-accent-foreground":"text-muted-foreground hover:text-foreground"),children:t.label},t.href)})})}},1304:function(e,t,n){"use strict";n.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return l},aY:function(){return d},ll:function(){return o}});var r=n(7437),a=n(2265),s=n(1216);let l=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",n),...a})});l.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",n),...a})});i.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",n),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",n),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",n),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",n),...a})}).displayName="CardFooter"},3340:function(e,t,n){"use strict";n.d(t,{H:function(){return i},a:function(){return o}});var r=n(7437),a=n(2265),s=n(3196);let l=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[n,i]=(0,a.useState)(null),[o,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(null),[f,m]=(0,a.useState)([]),h=(0,a.useCallback)(async()=>{try{let n=await fetch("/api/auth/me",{credentials:"include"});if(n.ok){var e,t;let r=await n.json();if(i(r.user),m(r.sites||[]),(null===(e=r.sites)||void 0===e?void 0:e.length)===1)u(r.sites[0]);else{let e=localStorage.getItem("currentSiteId");if(e){let n=null===(t=r.sites)||void 0===t?void 0:t.find(t=>t.id===e);n&&u(n)}}}else i(null),m([]),u(null)}catch(e){i(null)}finally{c(!1)}},[]);(0,a.useEffect)(()=>{h()},[h]);let x=async(e,t)=>{var n;let r=await (0,s.Nv)("POST","/api/auth/login",{email:e,password:t}),a=await r.json();i(a.user),m(a.sites||[]),(null===(n=a.sites)||void 0===n?void 0:n.length)===1&&u(a.sites[0])},v=async()=>{await (0,s.Nv)("POST","/api/auth/logout"),i(null),u(null),m([]),localStorage.removeItem("currentSiteId")};return(0,r.jsx)(l.Provider,{value:{user:n,isLoading:o,isAuthenticated:!!n,currentSite:d,availableSites:f,login:x,logout:v,selectSite:e=>{u(e),localStorage.setItem("currentSiteId",e.id)},refreshUser:h},children:t})}function o(){let e=(0,a.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},1119:function(e,t,n){"use strict";n.d(t,{K4:function(){return l},Sg:function(){return a},oo:function(){return o},un:function(){return i}});let r="inventoryEventQueue";function a(){let e=localStorage.getItem(r);if(!e)return[];try{let t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return[]}}function s(e){localStorage.setItem(r,JSON.stringify(e))}function l(e){let t=a();return t.push(e),s(t),t}function i(e,t){let n=a().map(n=>n.id===e?{...n,...t}:n);return s(n),n}function o(e){let t=a().filter(t=>t.id!==e);return s(t),t}},3196:function(e,t,n){"use strict";async function r(e){if(!e.ok){let t=await e.text()||e.statusText;throw Error("".concat(e.status,": ").concat(t))}}async function a(e,t,n){let a=await fetch(t,{method:e,headers:n?{"Content-Type":"application/json"}:{},body:n?JSON.stringify(n):void 0,credentials:"include"});return await r(a),a}n.d(t,{Eh:function(){return s},Nv:function(){return a}});let s=new(n(946)).S({defaultOptions:{queries:{queryFn:(e=>{let{on401:t}=e;return async e=>{let{queryKey:n}=e,a=await fetch(n.join("/"),{credentials:"include"});return"returnNull"===t&&401===a.status?null:(await r(a),await a.json())}})({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}})},1216:function(e,t,n){"use strict";n.d(t,{cn:function(){return s}});var r=n(1994),a=n(3335);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,r.W)(t))}},9376:function(e,t,n){"use strict";var r=n(5475);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}})}},function(e){e.O(0,[454,946,648,16,971,117,744],function(){return e(e.s=9983)}),_N_E=e.O()}]);