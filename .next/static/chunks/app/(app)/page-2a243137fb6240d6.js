(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[198],{3950:function(e,t,r){Promise.resolve().then(r.bind(r,4178))},4178:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var n=r(7437),s=r(5005),a=r(4794),i=r(9205);let l=(0,i.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),c=(0,i.Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var o=r(525);let d=(0,i.Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var u=r(1304),m=r(2473),f=r(3340);let h=[{title:"Active Jobs",value:"24",change:"+3 from yesterday",changeType:"positive",icon:s.Z},{title:"Inventory Items",value:"1,847",change:"98% accuracy",changeType:"neutral",icon:a.Z},{title:"Pending Orders",value:"12",change:"5 urgent",changeType:"warning",icon:l},{title:"Completed Today",value:"38",change:"+12% vs avg",changeType:"positive",icon:c}],x=[{id:1,action:"Job #1234 completed",user:"John Smith",time:"2 min ago",type:"success"},{id:2,action:"Inventory count started",user:"Sarah Johnson",time:"15 min ago",type:"info"},{id:3,action:"Low stock alert: Widget A",user:"System",time:"1 hour ago",type:"warning"},{id:4,action:"New purchase order created",user:"Mike Wilson",time:"2 hours ago",type:"info"},{id:5,action:"Maintenance scheduled",user:"Tech Team",time:"3 hours ago",type:"info"}];function p(){let{user:e,currentSite:t}=(0,f.a)();return(0,n.jsxs)("div",{className:"flex flex-col gap-6 p-6",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-dashboard-title",children:"Dashboard"}),(0,n.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Welcome back, ",null==e?void 0:e.firstName,". Here's what's happening at"," ",(0,n.jsx)("span",{className:"font-medium",children:null==t?void 0:t.name}),"."]})]}),(0,n.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:h.map(e=>(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[(0,n.jsx)(u.ll,{className:"text-xs font-medium uppercase tracking-wide text-muted-foreground",children:e.title}),(0,n.jsx)(e.icon,{className:"h-5 w-5 text-muted-foreground"})]}),(0,n.jsxs)(u.aY,{children:[(0,n.jsx)("div",{className:"text-2xl font-semibold","data-testid":"text-stat-".concat(e.title.toLowerCase().replace(/\s+/g,"-")),children:e.value}),(0,n.jsx)("p",{className:"mt-1 text-xs ".concat("positive"===e.changeType?"text-green-600 dark:text-green-400":"warning"===e.changeType?"text-amber-600 dark:text-amber-400":"text-muted-foreground"),children:e.change})]})]},e.title))}),(0,n.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,n.jsx)("div",{className:"lg:col-span-2",children:(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{children:[(0,n.jsx)(u.ll,{className:"text-lg font-semibold",children:"Quick Actions"}),(0,n.jsx)(u.SZ,{children:"Common tasks and shortcuts"})]}),(0,n.jsx)(u.aY,{children:(0,n.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[(0,n.jsx)(g,{icon:a.Z,title:"View Inventory",description:"Check stock levels",href:"/modules/inventory"}),(0,n.jsx)(g,{icon:s.Z,title:"Manage Jobs",description:"View active jobs",href:"/modules/jobs"}),(0,n.jsx)(g,{icon:o.Z,title:"Sales ATP",description:"Available to promise",href:"/modules/sales-atp"})]})})]})}),(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{children:[(0,n.jsx)(u.ll,{className:"text-lg font-semibold",children:"Recent Activity"}),(0,n.jsx)(u.SZ,{children:"Latest updates from your team"})]}),(0,n.jsx)(u.aY,{children:(0,n.jsx)("div",{className:"space-y-4",children:x.map(e=>(0,n.jsxs)("div",{className:"flex items-start gap-3 text-sm","data-testid":"activity-item-".concat(e.id),children:[(0,n.jsx)("div",{className:"mt-1 h-2 w-2 rounded-full flex-shrink-0 ".concat("success"===e.type?"bg-green-500":"warning"===e.type?"bg-amber-500":"bg-blue-500")}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("p",{className:"font-medium truncate",children:e.action}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.user," \xb7 ",e.time]})]})]},e.id))})})]})]}),(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{className:"flex flex-row items-center justify-between gap-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(u.ll,{className:"text-lg font-semibold flex items-center gap-2",children:[(0,n.jsx)(d,{className:"h-5 w-5 text-amber-500"}),"Alerts & Notifications"]}),(0,n.jsx)(u.SZ,{children:"Items requiring your attention"})]}),(0,n.jsx)(m.C,{variant:"secondary",children:"3 new"})]}),(0,n.jsx)(u.aY,{children:(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)(v,{title:"Low Stock Alert",description:"Widget A is below minimum threshold (15 remaining)",severity:"warning"}),(0,n.jsx)(v,{title:"Maintenance Due",description:"Pleater 1 scheduled maintenance in 2 days",severity:"info"}),(0,n.jsx)(v,{title:"Order Delayed",description:"PO-2024-0892 shipment delayed by supplier",severity:"error"})]})})]})]})}function g(e){let{icon:t,title:r,description:s,href:a}=e;return(0,n.jsxs)("a",{href:a,className:"flex items-center gap-3 rounded-lg border p-4 transition-colors hover-elevate","data-testid":"link-quick-action-".concat(r.toLowerCase().replace(/\s+/g,"-")),children:[(0,n.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-md bg-primary/10 text-primary",children:(0,n.jsx)(t,{className:"h-5 w-5"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-medium",children:r}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:s})]})]})}function v(e){let{title:t,description:r,severity:s}=e;return(0,n.jsxs)("div",{className:"rounded-r-md border-l-4 p-4 ".concat({warning:"border-l-amber-500 bg-amber-50 dark:bg-amber-950/20",info:"border-l-blue-500 bg-blue-50 dark:bg-blue-950/20",error:"border-l-red-500 bg-red-50 dark:bg-red-950/20"}[s]),children:[(0,n.jsx)("p",{className:"text-sm font-medium",children:t}),(0,n.jsx)("p",{className:"mt-1 text-xs text-muted-foreground",children:r})]})}function y(){return(0,n.jsx)(p,{})}},2473:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var n=r(7437);r(2265);var s=r(535),a=r(1216);let i=(0,s.j)("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...s}=e;return(0,n.jsx)("div",{className:(0,a.cn)(i({variant:r}),t),...s})}},1304:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var n=r(7437),s=r(2265),a=r(1216);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});c.displayName="CardTitle";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...s})});o.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},3340:function(e,t,r){"use strict";r.d(t,{H:function(){return l},a:function(){return c}});var n=r(7437),s=r(2265),a=r(3196);let i=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,s.useState)(null),[c,o]=(0,s.useState)(!0),[d,u]=(0,s.useState)(null),[m,f]=(0,s.useState)([]),h=(0,s.useCallback)(async()=>{try{let r=await fetch("/api/auth/me",{credentials:"include"});if(r.ok){var e,t;let n=await r.json();if(l(n.user),f(n.sites||[]),(null===(e=n.sites)||void 0===e?void 0:e.length)===1)u(n.sites[0]);else{let e=localStorage.getItem("currentSiteId");if(e){let r=null===(t=n.sites)||void 0===t?void 0:t.find(t=>t.id===e);r&&u(r)}}}else l(null),f([]),u(null)}catch(e){l(null)}finally{o(!1)}},[]);(0,s.useEffect)(()=>{h()},[h]);let x=async(e,t)=>{var r;let n=await (0,a.Nv)("POST","/api/auth/login",{email:e,password:t}),s=await n.json();l(s.user),f(s.sites||[]),(null===(r=s.sites)||void 0===r?void 0:r.length)===1&&u(s.sites[0])},p=async()=>{await (0,a.Nv)("POST","/api/auth/logout"),l(null),u(null),f([]),localStorage.removeItem("currentSiteId")};return(0,n.jsx)(i.Provider,{value:{user:r,isLoading:c,isAuthenticated:!!r,currentSite:d,availableSites:m,login:x,logout:p,selectSite:e=>{u(e),localStorage.setItem("currentSiteId",e.id)},refreshUser:h},children:t})}function c(){let e=(0,s.useContext)(i);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},3196:function(e,t,r){"use strict";async function n(e){if(!e.ok){let t=await e.text()||e.statusText;throw Error("".concat(e.status,": ").concat(t))}}async function s(e,t,r){let s=await fetch(t,{method:e,headers:r?{"Content-Type":"application/json"}:{},body:r?JSON.stringify(r):void 0,credentials:"include"});return await n(s),s}r.d(t,{Eh:function(){return a},Nv:function(){return s}});let a=new(r(946)).S({defaultOptions:{queries:{queryFn:(e=>{let{on401:t}=e;return async e=>{let{queryKey:r}=e,s=await fetch(r.join("/"),{credentials:"include"});return"returnNull"===t&&401===s.status?null:(await n(s),await s.json())}})({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}})},1216:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var n=r(1994),s=r(3335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}},9205:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(2265);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...m}=e;return(0,n.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:r,strokeWidth:c?24*Number(l)/Number(s):l,className:a("lucide",o),...m},[...u.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let r=(0,n.forwardRef)((r,i)=>{let{className:c,...o}=r;return(0,n.createElement)(l,{ref:i,iconNode:t,className:a("lucide-".concat(s(e)),c),...o})});return r.displayName="".concat(e),r}},5005:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},4794:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},525:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},535:function(e,t,r){"use strict";r.d(t,{j:function(){return i}});var n=r(1994);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=n.W,i=(e,t)=>r=>{var n;if((null==t?void 0:t.variants)==null)return a(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:l}=t,c=Object.keys(i).map(e=>{let t=null==r?void 0:r[e],n=null==l?void 0:l[e];if(null===t)return null;let a=s(t)||s(n);return i[e][a]}),o=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return a(e,c,null==t?void 0:null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...o}[t]):({...l,...o})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}},function(e){e.O(0,[454,946,971,117,744],function(){return e(e.s=3950)}),_N_E=e.O()}]);