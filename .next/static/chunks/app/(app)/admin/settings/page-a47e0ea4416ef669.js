(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[756],{6754:function(e,t,s){Promise.resolve().then(s.bind(s,7733))},7733:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var n=s(7437),i=s(8728),a=s(8420),r=s(4766),l=s(8906),d=s(91),c=s(4513),o=s(1304),u=s(1219),f=s(3579),m=s(2265),x=s(721),h=s(1216);let j=m.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)(x.fC,{className:(0,h.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...i,ref:t,children:(0,n.jsx)(x.bU,{className:(0,h.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});j.displayName=x.fC.displayName;var g=s(6916),v=s(271);let p=v.fC,b=m.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)(v.aV,{ref:t,className:(0,h.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...i})});b.displayName=v.aV.displayName;let y=m.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)(v.xz,{ref:t,className:(0,h.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...i})});y.displayName=v.xz.displayName;let N=m.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)(v.VY,{ref:t,className:(0,h.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...i})});N.displayName=v.VY.displayName;var w=s(3340);function k(){let{user:e}=(0,w.a)();return(0,n.jsxs)("div",{className:"flex flex-col gap-6 p-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-md bg-primary/10 text-primary",children:(0,n.jsx)(i.Z,{className:"h-5 w-5"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-settings-title",children:"Settings"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage tenant and system configuration"})]})]}),(0,n.jsxs)(p,{defaultValue:"general",className:"space-y-6",children:[(0,n.jsxs)(b,{children:[(0,n.jsxs)(y,{value:"general","data-testid":"tab-general",children:[(0,n.jsx)(a.Z,{className:"mr-2 h-4 w-4"}),"General"]}),(0,n.jsxs)(y,{value:"notifications","data-testid":"tab-notifications",children:[(0,n.jsx)(r.Z,{className:"mr-2 h-4 w-4"}),"Notifications"]}),(0,n.jsxs)(y,{value:"security","data-testid":"tab-security",children:[(0,n.jsx)(l.Z,{className:"mr-2 h-4 w-4"}),"Security"]}),(0,n.jsxs)(y,{value:"modules","data-testid":"tab-modules",children:[(0,n.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),"Modules"]})]}),(0,n.jsx)(N,{value:"general",children:(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{children:[(0,n.jsx)(o.ll,{className:"text-lg font-semibold",children:"Tenant Information"}),(0,n.jsx)(o.SZ,{children:"Basic information about your organization"})]}),(0,n.jsxs)(o.aY,{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(f._,{htmlFor:"tenant-name",children:"Organization Name"}),(0,n.jsx)(u.I,{id:"tenant-name",defaultValue:(null==e?void 0:e.tenantName)||"Acme Warehouse","data-testid":"input-tenant-name"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(f._,{htmlFor:"tenant-slug",children:"URL Slug"}),(0,n.jsx)(u.I,{id:"tenant-slug",defaultValue:"acme","data-testid":"input-tenant-slug"})]})]}),(0,n.jsx)(g.Z,{}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(c.z,{"data-testid":"button-save-general",children:"Save Changes"})})]})]})}),(0,n.jsx)(N,{value:"notifications",children:(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{children:[(0,n.jsx)(o.ll,{className:"text-lg font-semibold",children:"Notification Preferences"}),(0,n.jsx)(o.SZ,{children:"Configure how and when you receive notifications"})]}),(0,n.jsx)(o.aY,{className:"space-y-6",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(f._,{children:"Low Stock Alerts"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receive alerts when inventory falls below threshold"})]}),(0,n.jsx)(j,{defaultChecked:!0,"data-testid":"switch-low-stock"})]}),(0,n.jsx)(g.Z,{}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(f._,{children:"Job Completion Notifications"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get notified when production jobs are completed"})]}),(0,n.jsx)(j,{defaultChecked:!0,"data-testid":"switch-job-complete"})]}),(0,n.jsx)(g.Z,{}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(f._,{children:"Maintenance Reminders"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receive reminders for scheduled maintenance"})]}),(0,n.jsx)(j,{defaultChecked:!0,"data-testid":"switch-maintenance"})]}),(0,n.jsx)(g.Z,{}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(f._,{children:"Email Digest"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receive daily summary via email"})]}),(0,n.jsx)(j,{"data-testid":"switch-email-digest"})]})]})})]})}),(0,n.jsx)(N,{value:"security",children:(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{children:[(0,n.jsx)(o.ll,{className:"text-lg font-semibold",children:"Security Settings"}),(0,n.jsx)(o.SZ,{children:"Configure authentication and access controls"})]}),(0,n.jsx)(o.aY,{className:"space-y-6",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(f._,{children:"Require Strong Passwords"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Enforce minimum 12 characters with special characters"})]}),(0,n.jsx)(j,{defaultChecked:!0,"data-testid":"switch-strong-passwords"})]}),(0,n.jsx)(g.Z,{}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(f._,{children:"Session Timeout"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Automatically log out after inactivity"})]}),(0,n.jsx)(j,{defaultChecked:!0,"data-testid":"switch-session-timeout"})]}),(0,n.jsx)(g.Z,{}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(f._,{children:"Audit All Actions"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Log all user actions to the audit trail"})]}),(0,n.jsx)(j,{defaultChecked:!0,"data-testid":"switch-audit-all"})]})]})})]})}),(0,n.jsx)(N,{value:"modules",children:(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{children:[(0,n.jsx)(o.ll,{className:"text-lg font-semibold",children:"Module Configuration"}),(0,n.jsx)(o.SZ,{children:"Enable or disable modules for this tenant"})]}),(0,n.jsx)(o.aY,{className:"space-y-6",children:(0,n.jsx)("div",{className:"space-y-4",children:[{id:"inventory",name:"Inventory",description:"Stock management and tracking"},{id:"jobs",name:"Jobs",description:"Production job management"},{id:"purchasing",name:"Purchasing",description:"Purchase order management"},{id:"cycle-counts",name:"Cycle Counts",description:"Inventory auditing"},{id:"maintenance",name:"Maintenance",description:"Equipment maintenance tracking"},{id:"sales-atp",name:"Sales ATP",description:"Available to promise reporting"},{id:"dashboards",name:"Dashboards",description:"Analytics and reporting"}].map((e,t)=>(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(f._,{children:e.name}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]}),(0,n.jsx)(j,{defaultChecked:!0,"data-testid":"switch-module-".concat(e.id)})]}),t<6&&(0,n.jsx)(g.Z,{className:"mt-4"})]},e.id))})})]})})]})]})}function S(){return(0,n.jsx)(k,{})}},4513:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var n=s(7437),i=s(2265),a=s(7053),r=s(535),l=s(1216);let d=(0,r.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:s,variant:i,size:r,asChild:c=!1,...o}=e,u=c?a.g7:"button";return(0,n.jsx)(u,{className:(0,l.cn)(d({variant:i,size:r,className:s})),ref:t,...o})});c.displayName="Button"},1304:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return r},aY:function(){return o},ll:function(){return d}});var n=s(7437),i=s(2265),a=s(1216);let r=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",s),...i})});r.displayName="Card";let l=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",s),...i})});l.displayName="CardHeader";let d=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",s),...i})});d.displayName="CardTitle";let c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",s),...i})});c.displayName="CardDescription";let o=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",s),...i})});o.displayName="CardContent",i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",s),...i})}).displayName="CardFooter"},1219:function(e,t,s){"use strict";s.d(t,{I:function(){return r}});var n=s(7437),i=s(2265),a=s(1216);let r=i.forwardRef((e,t)=>{let{className:s,type:i,...r}=e;return(0,n.jsx)("input",{type:i,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...r})});r.displayName="Input"},3579:function(e,t,s){"use strict";s.d(t,{_:function(){return c}});var n=s(7437),i=s(2265),a=s(6394),r=s(535),l=s(1216);let d=(0,r.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)(a.f,{ref:t,className:(0,l.cn)(d(),s),...i})});c.displayName=a.f.displayName},6916:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var n=s(7437),i=s(2265),a=s(5156),r=s(1216);let l=i.forwardRef((e,t)=>{let{className:s,orientation:i="horizontal",decorative:l=!0,...d}=e;return(0,n.jsx)(a.f,{ref:t,decorative:l,orientation:i,className:(0,r.cn)("shrink-0 bg-border","horizontal"===i?"h-[1px] w-full":"h-full w-[1px]",s),...d})});l.displayName=a.f.displayName},3340:function(e,t,s){"use strict";s.d(t,{H:function(){return l},a:function(){return d}});var n=s(7437),i=s(2265),a=s(3196);let r=(0,i.createContext)(void 0);function l(e){let{children:t}=e,[s,l]=(0,i.useState)(null),[d,c]=(0,i.useState)(!0),[o,u]=(0,i.useState)(null),[f,m]=(0,i.useState)([]),x=(0,i.useCallback)(async()=>{try{let s=await fetch("/api/auth/me",{credentials:"include"});if(s.ok){var e,t;let n=await s.json();if(l(n.user),m(n.sites||[]),(null===(e=n.sites)||void 0===e?void 0:e.length)===1)u(n.sites[0]);else{let e=localStorage.getItem("currentSiteId");if(e){let s=null===(t=n.sites)||void 0===t?void 0:t.find(t=>t.id===e);s&&u(s)}}}else l(null),m([]),u(null)}catch(e){l(null)}finally{c(!1)}},[]);(0,i.useEffect)(()=>{x()},[x]);let h=async(e,t)=>{var s;let n=await (0,a.Nv)("POST","/api/auth/login",{email:e,password:t}),i=await n.json();l(i.user),m(i.sites||[]),(null===(s=i.sites)||void 0===s?void 0:s.length)===1&&u(i.sites[0])},j=async()=>{await (0,a.Nv)("POST","/api/auth/logout"),l(null),u(null),m([]),localStorage.removeItem("currentSiteId")};return(0,n.jsx)(r.Provider,{value:{user:s,isLoading:d,isAuthenticated:!!s,currentSite:o,availableSites:f,login:h,logout:j,selectSite:e=>{u(e),localStorage.setItem("currentSiteId",e.id)},refreshUser:x},children:t})}function d(){let e=(0,i.useContext)(r);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},3196:function(e,t,s){"use strict";async function n(e){if(!e.ok){let t=await e.text()||e.statusText;throw Error("".concat(e.status,": ").concat(t))}}async function i(e,t,s){let i=await fetch(t,{method:e,headers:s?{"Content-Type":"application/json"}:{},body:s?JSON.stringify(s):void 0,credentials:"include"});return await n(i),i}s.d(t,{Eh:function(){return a},Nv:function(){return i}});let a=new(s(946)).S({defaultOptions:{queries:{queryFn:(e=>{let{on401:t}=e;return async e=>{let{queryKey:s}=e,i=await fetch(s.join("/"),{credentials:"include"});return"returnNull"===t&&401===i.status?null:(await n(i),await i.json())}})({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}})},1216:function(e,t,s){"use strict";s.d(t,{cn:function(){return a}});var n=s(1994),i=s(3335);function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.m6)((0,n.W)(t))}}},function(e){e.O(0,[454,946,720,987,971,117,744],function(){return e(e.s=6754)}),_N_E=e.O()}]);