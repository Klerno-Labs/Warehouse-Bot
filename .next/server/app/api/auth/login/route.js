"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/login/route";
exports.ids = ["app/api/auth/login/route"];
exports.modules = {

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("bcrypt");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.ts&appDir=C%3A%5CUsers%5CSomli%5COneDrive%5CDesktop%5CMy%20Apps%5CWarehouse%20Builder%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CSomli%5COneDrive%5CDesktop%5CMy%20Apps%5CWarehouse%20Builder&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.ts&appDir=C%3A%5CUsers%5CSomli%5COneDrive%5CDesktop%5CMy%20Apps%5CWarehouse%20Builder%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CSomli%5COneDrive%5CDesktop%5CMy%20Apps%5CWarehouse%20Builder&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Somli_OneDrive_Desktop_My_Apps_Warehouse_Builder_app_api_auth_login_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/auth/login/route.ts */ \"(rsc)/./app/api/auth/login/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/login/route\",\n        pathname: \"/api/auth/login\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/login/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Somli\\\\OneDrive\\\\Desktop\\\\My Apps\\\\Warehouse Builder\\\\app\\\\api\\\\auth\\\\login\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Somli_OneDrive_Desktop_My_Apps_Warehouse_Builder_app_api_auth_login_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/auth/login/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGbG9naW4lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF1dGglMkZsb2dpbiUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF1dGglMkZsb2dpbiUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNTb21saSU1Q09uZURyaXZlJTVDRGVza3RvcCU1Q015JTIwQXBwcyU1Q1dhcmVob3VzZSUyMEJ1aWxkZXIlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q1NvbWxpJTVDT25lRHJpdmUlNUNEZXNrdG9wJTVDTXklMjBBcHBzJTVDV2FyZWhvdXNlJTIwQnVpbGRlciZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDZ0Q7QUFDN0g7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZXN0LWV4cHJlc3MvPzI3NzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcU29tbGlcXFxcT25lRHJpdmVcXFxcRGVza3RvcFxcXFxNeSBBcHBzXFxcXFdhcmVob3VzZSBCdWlsZGVyXFxcXGFwcFxcXFxhcGlcXFxcYXV0aFxcXFxsb2dpblxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXV0aC9sb2dpbi9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2F1dGgvbG9naW5cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2F1dGgvbG9naW4vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxTb21saVxcXFxPbmVEcml2ZVxcXFxEZXNrdG9wXFxcXE15IEFwcHNcXFxcV2FyZWhvdXNlIEJ1aWxkZXJcXFxcYXBwXFxcXGFwaVxcXFxhdXRoXFxcXGxvZ2luXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hdXRoL2xvZ2luL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.ts&appDir=C%3A%5CUsers%5CSomli%5COneDrive%5CDesktop%5CMy%20Apps%5CWarehouse%20Builder%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CSomli%5COneDrive%5CDesktop%5CMy%20Apps%5CWarehouse%20Builder&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/_utils/session.ts":
/*!***********************************!*\
  !*** ./app/api/_utils/session.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearSessionCookie: () => (/* binding */ clearSessionCookie),\n/* harmony export */   getSessionUser: () => (/* binding */ getSessionUser),\n/* harmony export */   getSessionUserWithRecord: () => (/* binding */ getSessionUserWithRecord),\n/* harmony export */   setSessionCookie: () => (/* binding */ setSessionCookie)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _server_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @server/storage */ \"(rsc)/./server/storage.ts\");\n\n\n\nconst COOKIE_NAME = \"wb_session\";\nconst SESSION_TTL_MS = 24 * 60 * 60 * 1000;\nfunction sign(payload, secret) {\n    const json = JSON.stringify(payload);\n    const data = Buffer.from(json).toString(\"base64url\");\n    const signature = crypto__WEBPACK_IMPORTED_MODULE_1___default().createHmac(\"sha256\", secret).update(data).digest(\"base64url\");\n    return `${data}.${signature}`;\n}\nfunction verify(token, secret) {\n    const [data, signature] = token.split(\".\");\n    if (!data || !signature) return null;\n    const expected = crypto__WEBPACK_IMPORTED_MODULE_1___default().createHmac(\"sha256\", secret).update(data).digest(\"base64url\");\n    if (!crypto__WEBPACK_IMPORTED_MODULE_1___default().timingSafeEqual(Buffer.from(signature), Buffer.from(expected))) return null;\n    const json = Buffer.from(data, \"base64url\").toString(\"utf-8\");\n    const payload = JSON.parse(json);\n    if (!payload.userId || Date.now() > payload.exp) return null;\n    return payload;\n}\nfunction getSecret() {\n    return process.env.SESSION_SECRET || \"warehouse-core-dev-secret\";\n}\nfunction setSessionCookie(userId) {\n    const payload = {\n        userId,\n        exp: Date.now() + SESSION_TTL_MS\n    };\n    const token = sign(payload, getSecret());\n    (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)().set(COOKIE_NAME, token, {\n        httpOnly: true,\n        sameSite: \"lax\",\n        secure: \"development\" === \"production\",\n        maxAge: SESSION_TTL_MS / 1000,\n        path: \"/\"\n    });\n}\nfunction clearSessionCookie() {\n    (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)().set(COOKIE_NAME, \"\", {\n        maxAge: 0,\n        path: \"/\"\n    });\n}\nasync function getSessionUser() {\n    const token = (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)().get(COOKIE_NAME)?.value;\n    if (!token) return null;\n    const payload = verify(token, getSecret());\n    if (!payload) return null;\n    return _server_storage__WEBPACK_IMPORTED_MODULE_2__.storage.getSessionUser(payload.userId);\n}\nasync function getSessionUserWithRecord() {\n    const token = (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)().get(COOKIE_NAME)?.value;\n    if (!token) return null;\n    const payload = verify(token, getSecret());\n    if (!payload) return null;\n    const user = await _server_storage__WEBPACK_IMPORTED_MODULE_2__.storage.getUser(payload.userId);\n    if (!user) return null;\n    const sessionUser = await _server_storage__WEBPACK_IMPORTED_MODULE_2__.storage.getSessionUser(payload.userId);\n    if (!sessionUser) return null;\n    return {\n        user,\n        sessionUser\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL191dGlscy9zZXNzaW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXVDO0FBQ1g7QUFDYztBQUcxQyxNQUFNRyxjQUFjO0FBQ3BCLE1BQU1DLGlCQUFpQixLQUFLLEtBQUssS0FBSztBQU90QyxTQUFTQyxLQUFLQyxPQUF1QixFQUFFQyxNQUFjO0lBQ25ELE1BQU1DLE9BQU9DLEtBQUtDLFNBQVMsQ0FBQ0o7SUFDNUIsTUFBTUssT0FBT0MsT0FBT0MsSUFBSSxDQUFDTCxNQUFNTSxRQUFRLENBQUM7SUFDeEMsTUFBTUMsWUFBWWQsd0RBQWlCLENBQUMsVUFBVU0sUUFBUVUsTUFBTSxDQUFDTixNQUFNTyxNQUFNLENBQUM7SUFDMUUsT0FBTyxDQUFDLEVBQUVQLEtBQUssQ0FBQyxFQUFFSSxVQUFVLENBQUM7QUFDL0I7QUFFQSxTQUFTSSxPQUFPQyxLQUFhLEVBQUViLE1BQWM7SUFDM0MsTUFBTSxDQUFDSSxNQUFNSSxVQUFVLEdBQUdLLE1BQU1DLEtBQUssQ0FBQztJQUN0QyxJQUFJLENBQUNWLFFBQVEsQ0FBQ0ksV0FBVyxPQUFPO0lBQ2hDLE1BQU1PLFdBQVdyQix3REFBaUIsQ0FBQyxVQUFVTSxRQUFRVSxNQUFNLENBQUNOLE1BQU1PLE1BQU0sQ0FBQztJQUN6RSxJQUFJLENBQUNqQiw2REFBc0IsQ0FBQ1csT0FBT0MsSUFBSSxDQUFDRSxZQUFZSCxPQUFPQyxJQUFJLENBQUNTLFlBQVksT0FBTztJQUNuRixNQUFNZCxPQUFPSSxPQUFPQyxJQUFJLENBQUNGLE1BQU0sYUFBYUcsUUFBUSxDQUFDO0lBQ3JELE1BQU1SLFVBQVVHLEtBQUtlLEtBQUssQ0FBQ2hCO0lBQzNCLElBQUksQ0FBQ0YsUUFBUW1CLE1BQU0sSUFBSUMsS0FBS0MsR0FBRyxLQUFLckIsUUFBUXNCLEdBQUcsRUFBRSxPQUFPO0lBQ3hELE9BQU90QjtBQUNUO0FBRUEsU0FBU3VCO0lBQ1AsT0FBT0MsUUFBUUMsR0FBRyxDQUFDQyxjQUFjLElBQUk7QUFDdkM7QUFFTyxTQUFTQyxpQkFBaUJSLE1BQWM7SUFDN0MsTUFBTW5CLFVBQTBCO1FBQUVtQjtRQUFRRyxLQUFLRixLQUFLQyxHQUFHLEtBQUt2QjtJQUFlO0lBQzNFLE1BQU1nQixRQUFRZixLQUFLQyxTQUFTdUI7SUFDNUI3QixxREFBT0EsR0FBR2tDLEdBQUcsQ0FBQy9CLGFBQWFpQixPQUFPO1FBQ2hDZSxVQUFVO1FBQ1ZDLFVBQVU7UUFDVkMsUUFBUVAsa0JBQXlCO1FBQ2pDUSxRQUFRbEMsaUJBQWlCO1FBQ3pCbUMsTUFBTTtJQUNSO0FBQ0Y7QUFFTyxTQUFTQztJQUNkeEMscURBQU9BLEdBQUdrQyxHQUFHLENBQUMvQixhQUFhLElBQUk7UUFBRW1DLFFBQVE7UUFBR0MsTUFBTTtJQUFJO0FBQ3hEO0FBRU8sZUFBZUU7SUFDcEIsTUFBTXJCLFFBQVFwQixxREFBT0EsR0FBRzBDLEdBQUcsQ0FBQ3ZDLGNBQWN3QztJQUMxQyxJQUFJLENBQUN2QixPQUFPLE9BQU87SUFDbkIsTUFBTWQsVUFBVWEsT0FBT0MsT0FBT1M7SUFDOUIsSUFBSSxDQUFDdkIsU0FBUyxPQUFPO0lBQ3JCLE9BQU9KLG9EQUFPQSxDQUFDdUMsY0FBYyxDQUFDbkMsUUFBUW1CLE1BQU07QUFDOUM7QUFFTyxlQUFlbUI7SUFDcEIsTUFBTXhCLFFBQVFwQixxREFBT0EsR0FBRzBDLEdBQUcsQ0FBQ3ZDLGNBQWN3QztJQUMxQyxJQUFJLENBQUN2QixPQUFPLE9BQU87SUFDbkIsTUFBTWQsVUFBVWEsT0FBT0MsT0FBT1M7SUFDOUIsSUFBSSxDQUFDdkIsU0FBUyxPQUFPO0lBQ3JCLE1BQU11QyxPQUFPLE1BQU0zQyxvREFBT0EsQ0FBQzRDLE9BQU8sQ0FBQ3hDLFFBQVFtQixNQUFNO0lBQ2pELElBQUksQ0FBQ29CLE1BQU0sT0FBTztJQUNsQixNQUFNRSxjQUFjLE1BQU03QyxvREFBT0EsQ0FBQ3VDLGNBQWMsQ0FBQ25DLFFBQVFtQixNQUFNO0lBQy9ELElBQUksQ0FBQ3NCLGFBQWEsT0FBTztJQUN6QixPQUFPO1FBQUVGO1FBQU1FO0lBQVk7QUFDN0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZXN0LWV4cHJlc3MvLi9hcHAvYXBpL191dGlscy9zZXNzaW9uLnRzP2U1OTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29va2llcyB9IGZyb20gXCJuZXh0L2hlYWRlcnNcIjtcclxuaW1wb3J0IGNyeXB0byBmcm9tIFwiY3J5cHRvXCI7XHJcbmltcG9ydCB7IHN0b3JhZ2UgfSBmcm9tIFwiQHNlcnZlci9zdG9yYWdlXCI7XHJcbmltcG9ydCB0eXBlIHsgU2Vzc2lvblVzZXIgfSBmcm9tIFwiQHNoYXJlZC9zY2hlbWFcIjtcclxuXHJcbmNvbnN0IENPT0tJRV9OQU1FID0gXCJ3Yl9zZXNzaW9uXCI7XHJcbmNvbnN0IFNFU1NJT05fVFRMX01TID0gMjQgKiA2MCAqIDYwICogMTAwMDtcclxuXHJcbnR5cGUgU2Vzc2lvblBheWxvYWQgPSB7XHJcbiAgdXNlcklkOiBzdHJpbmc7XHJcbiAgZXhwOiBudW1iZXI7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBzaWduKHBheWxvYWQ6IFNlc3Npb25QYXlsb2FkLCBzZWNyZXQ6IHN0cmluZykge1xyXG4gIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeShwYXlsb2FkKTtcclxuICBjb25zdCBkYXRhID0gQnVmZmVyLmZyb20oanNvbikudG9TdHJpbmcoXCJiYXNlNjR1cmxcIik7XHJcbiAgY29uc3Qgc2lnbmF0dXJlID0gY3J5cHRvLmNyZWF0ZUhtYWMoXCJzaGEyNTZcIiwgc2VjcmV0KS51cGRhdGUoZGF0YSkuZGlnZXN0KFwiYmFzZTY0dXJsXCIpO1xyXG4gIHJldHVybiBgJHtkYXRhfS4ke3NpZ25hdHVyZX1gO1xyXG59XHJcblxyXG5mdW5jdGlvbiB2ZXJpZnkodG9rZW46IHN0cmluZywgc2VjcmV0OiBzdHJpbmcpOiBTZXNzaW9uUGF5bG9hZCB8IG51bGwge1xyXG4gIGNvbnN0IFtkYXRhLCBzaWduYXR1cmVdID0gdG9rZW4uc3BsaXQoXCIuXCIpO1xyXG4gIGlmICghZGF0YSB8fCAhc2lnbmF0dXJlKSByZXR1cm4gbnVsbDtcclxuICBjb25zdCBleHBlY3RlZCA9IGNyeXB0by5jcmVhdGVIbWFjKFwic2hhMjU2XCIsIHNlY3JldCkudXBkYXRlKGRhdGEpLmRpZ2VzdChcImJhc2U2NHVybFwiKTtcclxuICBpZiAoIWNyeXB0by50aW1pbmdTYWZlRXF1YWwoQnVmZmVyLmZyb20oc2lnbmF0dXJlKSwgQnVmZmVyLmZyb20oZXhwZWN0ZWQpKSkgcmV0dXJuIG51bGw7XHJcbiAgY29uc3QganNvbiA9IEJ1ZmZlci5mcm9tKGRhdGEsIFwiYmFzZTY0dXJsXCIpLnRvU3RyaW5nKFwidXRmLThcIik7XHJcbiAgY29uc3QgcGF5bG9hZCA9IEpTT04ucGFyc2UoanNvbikgYXMgU2Vzc2lvblBheWxvYWQ7XHJcbiAgaWYgKCFwYXlsb2FkLnVzZXJJZCB8fCBEYXRlLm5vdygpID4gcGF5bG9hZC5leHApIHJldHVybiBudWxsO1xyXG4gIHJldHVybiBwYXlsb2FkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTZWNyZXQoKSB7XHJcbiAgcmV0dXJuIHByb2Nlc3MuZW52LlNFU1NJT05fU0VDUkVUIHx8IFwid2FyZWhvdXNlLWNvcmUtZGV2LXNlY3JldFwiO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0U2Vzc2lvbkNvb2tpZSh1c2VySWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHBheWxvYWQ6IFNlc3Npb25QYXlsb2FkID0geyB1c2VySWQsIGV4cDogRGF0ZS5ub3coKSArIFNFU1NJT05fVFRMX01TIH07XHJcbiAgY29uc3QgdG9rZW4gPSBzaWduKHBheWxvYWQsIGdldFNlY3JldCgpKTtcclxuICBjb29raWVzKCkuc2V0KENPT0tJRV9OQU1FLCB0b2tlbiwge1xyXG4gICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICBzYW1lU2l0ZTogXCJsYXhcIixcclxuICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiLFxyXG4gICAgbWF4QWdlOiBTRVNTSU9OX1RUTF9NUyAvIDEwMDAsXHJcbiAgICBwYXRoOiBcIi9cIixcclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyU2Vzc2lvbkNvb2tpZSgpIHtcclxuICBjb29raWVzKCkuc2V0KENPT0tJRV9OQU1FLCBcIlwiLCB7IG1heEFnZTogMCwgcGF0aDogXCIvXCIgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXNzaW9uVXNlcigpOiBQcm9taXNlPFNlc3Npb25Vc2VyIHwgbnVsbD4ge1xyXG4gIGNvbnN0IHRva2VuID0gY29va2llcygpLmdldChDT09LSUVfTkFNRSk/LnZhbHVlO1xyXG4gIGlmICghdG9rZW4pIHJldHVybiBudWxsO1xyXG4gIGNvbnN0IHBheWxvYWQgPSB2ZXJpZnkodG9rZW4sIGdldFNlY3JldCgpKTtcclxuICBpZiAoIXBheWxvYWQpIHJldHVybiBudWxsO1xyXG4gIHJldHVybiBzdG9yYWdlLmdldFNlc3Npb25Vc2VyKHBheWxvYWQudXNlcklkKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlc3Npb25Vc2VyV2l0aFJlY29yZCgpIHtcclxuICBjb25zdCB0b2tlbiA9IGNvb2tpZXMoKS5nZXQoQ09PS0lFX05BTUUpPy52YWx1ZTtcclxuICBpZiAoIXRva2VuKSByZXR1cm4gbnVsbDtcclxuICBjb25zdCBwYXlsb2FkID0gdmVyaWZ5KHRva2VuLCBnZXRTZWNyZXQoKSk7XHJcbiAgaWYgKCFwYXlsb2FkKSByZXR1cm4gbnVsbDtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgc3RvcmFnZS5nZXRVc2VyKHBheWxvYWQudXNlcklkKTtcclxuICBpZiAoIXVzZXIpIHJldHVybiBudWxsO1xyXG4gIGNvbnN0IHNlc3Npb25Vc2VyID0gYXdhaXQgc3RvcmFnZS5nZXRTZXNzaW9uVXNlcihwYXlsb2FkLnVzZXJJZCk7XHJcbiAgaWYgKCFzZXNzaW9uVXNlcikgcmV0dXJuIG51bGw7XHJcbiAgcmV0dXJuIHsgdXNlciwgc2Vzc2lvblVzZXIgfTtcclxufVxyXG4iXSwibmFtZXMiOlsiY29va2llcyIsImNyeXB0byIsInN0b3JhZ2UiLCJDT09LSUVfTkFNRSIsIlNFU1NJT05fVFRMX01TIiwic2lnbiIsInBheWxvYWQiLCJzZWNyZXQiLCJqc29uIiwiSlNPTiIsInN0cmluZ2lmeSIsImRhdGEiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJzaWduYXR1cmUiLCJjcmVhdGVIbWFjIiwidXBkYXRlIiwiZGlnZXN0IiwidmVyaWZ5IiwidG9rZW4iLCJzcGxpdCIsImV4cGVjdGVkIiwidGltaW5nU2FmZUVxdWFsIiwicGFyc2UiLCJ1c2VySWQiLCJEYXRlIiwibm93IiwiZXhwIiwiZ2V0U2VjcmV0IiwicHJvY2VzcyIsImVudiIsIlNFU1NJT05fU0VDUkVUIiwic2V0U2Vzc2lvbkNvb2tpZSIsInNldCIsImh0dHBPbmx5Iiwic2FtZVNpdGUiLCJzZWN1cmUiLCJtYXhBZ2UiLCJwYXRoIiwiY2xlYXJTZXNzaW9uQ29va2llIiwiZ2V0U2Vzc2lvblVzZXIiLCJnZXQiLCJ2YWx1ZSIsImdldFNlc3Npb25Vc2VyV2l0aFJlY29yZCIsInVzZXIiLCJnZXRVc2VyIiwic2Vzc2lvblVzZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/_utils/session.ts\n");

/***/ }),

/***/ "(rsc)/./app/api/auth/login/route.ts":
/*!*************************************!*\
  !*** ./app/api/auth/login/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcrypt */ \"bcrypt\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcrypt__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _shared_validation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @shared/validation */ \"(rsc)/./shared/validation.ts\");\n/* harmony import */ var _server_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @server/storage */ \"(rsc)/./server/storage.ts\");\n/* harmony import */ var _server_audit__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @server/audit */ \"(rsc)/./server/audit.ts\");\n/* harmony import */ var _app_api_utils_session__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @app/api/_utils/session */ \"(rsc)/./app/api/_utils/session.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n\n\n\n\n\n\n\nasync function POST(req) {\n    try {\n        const payload = _shared_validation__WEBPACK_IMPORTED_MODULE_2__.loginSchema.parse(await req.json());\n        const user = await _server_storage__WEBPACK_IMPORTED_MODULE_3__.storage.getUserByEmail(payload.email);\n        if (!user || !bcrypt__WEBPACK_IMPORTED_MODULE_1___default().compareSync(payload.password, user.password)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid email or password\"\n            }, {\n                status: 401\n            });\n        }\n        if (!user.isActive) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Account is deactivated\"\n            }, {\n                status: 403\n            });\n        }\n        (0,_app_api_utils_session__WEBPACK_IMPORTED_MODULE_5__.setSessionCookie)(user.id);\n        const sessionUser = await _server_storage__WEBPACK_IMPORTED_MODULE_3__.storage.getSessionUser(user.id);\n        const sites = await _server_storage__WEBPACK_IMPORTED_MODULE_3__.storage.getSitesForUser(user.id);\n        await (0,_server_audit__WEBPACK_IMPORTED_MODULE_4__.audit)(user.tenantId, user.id, \"LOGIN\", \"Session\", null, \"User logged in successfully\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            user: sessionUser,\n            sites\n        });\n    } catch (error) {\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_6__.z.ZodError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid request\",\n                details: error.errors\n            }, {\n                status: 400\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2F1dGgvbG9naW4vcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQTJDO0FBQ2Y7QUFDcUI7QUFDUDtBQUNKO0FBQ3FCO0FBQ25DO0FBRWpCLGVBQWVPLEtBQUtDLEdBQVk7SUFDckMsSUFBSTtRQUNGLE1BQU1DLFVBQVVQLDJEQUFXQSxDQUFDUSxLQUFLLENBQUMsTUFBTUYsSUFBSUcsSUFBSTtRQUNoRCxNQUFNQyxPQUFPLE1BQU1ULG9EQUFPQSxDQUFDVSxjQUFjLENBQUNKLFFBQVFLLEtBQUs7UUFDdkQsSUFBSSxDQUFDRixRQUFRLENBQUNYLHlEQUFrQixDQUFDUSxRQUFRTyxRQUFRLEVBQUVKLEtBQUtJLFFBQVEsR0FBRztZQUNqRSxPQUFPaEIscURBQVlBLENBQUNXLElBQUksQ0FBQztnQkFBRU0sT0FBTztZQUE0QixHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDakY7UUFDQSxJQUFJLENBQUNOLEtBQUtPLFFBQVEsRUFBRTtZQUNsQixPQUFPbkIscURBQVlBLENBQUNXLElBQUksQ0FBQztnQkFBRU0sT0FBTztZQUF5QixHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDOUU7UUFFQWIsd0VBQWdCQSxDQUFDTyxLQUFLUSxFQUFFO1FBQ3hCLE1BQU1DLGNBQWMsTUFBTWxCLG9EQUFPQSxDQUFDbUIsY0FBYyxDQUFDVixLQUFLUSxFQUFFO1FBQ3hELE1BQU1HLFFBQVEsTUFBTXBCLG9EQUFPQSxDQUFDcUIsZUFBZSxDQUFDWixLQUFLUSxFQUFFO1FBRW5ELE1BQU1oQixvREFBS0EsQ0FDVFEsS0FBS2EsUUFBUSxFQUNiYixLQUFLUSxFQUFFLEVBQ1AsU0FDQSxXQUNBLE1BQ0E7UUFHRixPQUFPcEIscURBQVlBLENBQUNXLElBQUksQ0FBQztZQUFFQyxNQUFNUztZQUFhRTtRQUFNO0lBQ3RELEVBQUUsT0FBT04sT0FBTztRQUNkLElBQUlBLGlCQUFpQlgsa0NBQUNBLENBQUNvQixRQUFRLEVBQUU7WUFDL0IsT0FBTzFCLHFEQUFZQSxDQUFDVyxJQUFJLENBQUM7Z0JBQUVNLE9BQU87Z0JBQW1CVSxTQUFTVixNQUFNVyxNQUFNO1lBQUMsR0FBRztnQkFBRVYsUUFBUTtZQUFJO1FBQzlGO1FBQ0EsT0FBT2xCLHFEQUFZQSxDQUFDVyxJQUFJLENBQUM7WUFBRU0sT0FBTztRQUF3QixHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUM3RTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVzdC1leHByZXNzLy4vYXBwL2FwaS9hdXRoL2xvZ2luL3JvdXRlLnRzPzRmMjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XHJcbmltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdFwiO1xyXG5pbXBvcnQgeyBsb2dpblNjaGVtYSB9IGZyb20gXCJAc2hhcmVkL3ZhbGlkYXRpb25cIjtcclxuaW1wb3J0IHsgc3RvcmFnZSB9IGZyb20gXCJAc2VydmVyL3N0b3JhZ2VcIjtcclxuaW1wb3J0IHsgYXVkaXQgfSBmcm9tIFwiQHNlcnZlci9hdWRpdFwiO1xyXG5pbXBvcnQgeyBzZXRTZXNzaW9uQ29va2llIH0gZnJvbSBcIkBhcHAvYXBpL191dGlscy9zZXNzaW9uXCI7XHJcbmltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcGF5bG9hZCA9IGxvZ2luU2NoZW1hLnBhcnNlKGF3YWl0IHJlcS5qc29uKCkpO1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHN0b3JhZ2UuZ2V0VXNlckJ5RW1haWwocGF5bG9hZC5lbWFpbCk7XHJcbiAgICBpZiAoIXVzZXIgfHwgIWJjcnlwdC5jb21wYXJlU3luYyhwYXlsb2FkLnBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKSkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkXCIgfSwgeyBzdGF0dXM6IDQwMSB9KTtcclxuICAgIH1cclxuICAgIGlmICghdXNlci5pc0FjdGl2ZSkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJBY2NvdW50IGlzIGRlYWN0aXZhdGVkXCIgfSwgeyBzdGF0dXM6IDQwMyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRTZXNzaW9uQ29va2llKHVzZXIuaWQpO1xyXG4gICAgY29uc3Qgc2Vzc2lvblVzZXIgPSBhd2FpdCBzdG9yYWdlLmdldFNlc3Npb25Vc2VyKHVzZXIuaWQpO1xyXG4gICAgY29uc3Qgc2l0ZXMgPSBhd2FpdCBzdG9yYWdlLmdldFNpdGVzRm9yVXNlcih1c2VyLmlkKTtcclxuXHJcbiAgICBhd2FpdCBhdWRpdChcclxuICAgICAgdXNlci50ZW5hbnRJZCxcclxuICAgICAgdXNlci5pZCxcclxuICAgICAgXCJMT0dJTlwiLFxyXG4gICAgICBcIlNlc3Npb25cIixcclxuICAgICAgbnVsbCxcclxuICAgICAgXCJVc2VyIGxvZ2dlZCBpbiBzdWNjZXNzZnVsbHlcIixcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgdXNlcjogc2Vzc2lvblVzZXIsIHNpdGVzIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiB6LlpvZEVycm9yKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIkludmFsaWQgcmVxdWVzdFwiLCBkZXRhaWxzOiBlcnJvci5lcnJvcnMgfSwgeyBzdGF0dXM6IDQwMCB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJiY3J5cHQiLCJsb2dpblNjaGVtYSIsInN0b3JhZ2UiLCJhdWRpdCIsInNldFNlc3Npb25Db29raWUiLCJ6IiwiUE9TVCIsInJlcSIsInBheWxvYWQiLCJwYXJzZSIsImpzb24iLCJ1c2VyIiwiZ2V0VXNlckJ5RW1haWwiLCJlbWFpbCIsImNvbXBhcmVTeW5jIiwicGFzc3dvcmQiLCJlcnJvciIsInN0YXR1cyIsImlzQWN0aXZlIiwiaWQiLCJzZXNzaW9uVXNlciIsImdldFNlc3Npb25Vc2VyIiwic2l0ZXMiLCJnZXRTaXRlc0ZvclVzZXIiLCJ0ZW5hbnRJZCIsIlpvZEVycm9yIiwiZGV0YWlscyIsImVycm9ycyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auth/login/route.ts\n");

/***/ }),

/***/ "(rsc)/./server/audit.ts":
/*!*************************!*\
  !*** ./server/audit.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   audit: () => (/* binding */ audit)\n/* harmony export */ });\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./storage */ \"(rsc)/./server/storage.ts\");\n\nasync function audit(tenantId, userId, action, entityType, entityId, details, ipAddress) {\n    await _storage__WEBPACK_IMPORTED_MODULE_0__.storage.createAuditEvent({\n        tenantId,\n        userId,\n        action,\n        entityType,\n        entityId,\n        details,\n        ipAddress: ipAddress || null\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zZXJ2ZXIvYXVkaXQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBb0M7QUFFN0IsZUFBZUMsTUFDcEJDLFFBQWdCLEVBQ2hCQyxNQUFxQixFQUNyQkMsTUFBYyxFQUNkQyxVQUFrQixFQUNsQkMsUUFBdUIsRUFDdkJDLE9BQWUsRUFDZkMsU0FBa0I7SUFFbEIsTUFBTVIsNkNBQU9BLENBQUNTLGdCQUFnQixDQUFDO1FBQzdCUDtRQUNBQztRQUNBQztRQUNBQztRQUNBQztRQUNBQztRQUNBQyxXQUFXQSxhQUFhO0lBQzFCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZXN0LWV4cHJlc3MvLi9zZXJ2ZXIvYXVkaXQudHM/ODlmNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdG9yYWdlIH0gZnJvbSBcIi4vc3RvcmFnZVwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXVkaXQoXG4gIHRlbmFudElkOiBzdHJpbmcsXG4gIHVzZXJJZDogc3RyaW5nIHwgbnVsbCxcbiAgYWN0aW9uOiBzdHJpbmcsXG4gIGVudGl0eVR5cGU6IHN0cmluZyxcbiAgZW50aXR5SWQ6IHN0cmluZyB8IG51bGwsXG4gIGRldGFpbHM6IHN0cmluZyxcbiAgaXBBZGRyZXNzPzogc3RyaW5nLFxuKSB7XG4gIGF3YWl0IHN0b3JhZ2UuY3JlYXRlQXVkaXRFdmVudCh7XG4gICAgdGVuYW50SWQsXG4gICAgdXNlcklkLFxuICAgIGFjdGlvbixcbiAgICBlbnRpdHlUeXBlLFxuICAgIGVudGl0eUlkLFxuICAgIGRldGFpbHMsXG4gICAgaXBBZGRyZXNzOiBpcEFkZHJlc3MgfHwgbnVsbCxcbiAgfSk7XG59XG4iXSwibmFtZXMiOlsic3RvcmFnZSIsImF1ZGl0IiwidGVuYW50SWQiLCJ1c2VySWQiLCJhY3Rpb24iLCJlbnRpdHlUeXBlIiwiZW50aXR5SWQiLCJkZXRhaWxzIiwiaXBBZGRyZXNzIiwiY3JlYXRlQXVkaXRFdmVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./server/audit.ts\n");

/***/ }),

/***/ "(rsc)/./server/storage.ts":
/*!***************************!*\
  !*** ./server/storage.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MemStorage: () => (/* binding */ MemStorage),\n/* harmony export */   storage: () => (/* binding */ storage)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcrypt */ \"bcrypt\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcrypt__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass MemStorage {\n    constructor(){\n        this.users = new Map();\n        this.tenants = new Map();\n        this.sites = new Map();\n        this.departments = new Map();\n        this.workcells = new Map();\n        this.devices = new Map();\n        this.badges = new Map();\n        this.auditEvents = new Map();\n        this.items = new Map();\n        this.locations = new Map();\n        this.reasonCodes = new Map();\n        this.inventoryEvents = new Map();\n        this.inventoryBalances = new Map();\n        this.seedData();\n    }\n    seedData() {\n        // Create tenant\n        const tenantId = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n        const tenant = {\n            id: tenantId,\n            name: \"Acme Warehouse\",\n            slug: \"acme\",\n            enabledModules: [\n                \"inventory\",\n                \"jobs\",\n                \"purchasing\",\n                \"cycle-counts\",\n                \"maintenance\",\n                \"sales-atp\",\n                \"dashboards\"\n            ]\n        };\n        this.tenants.set(tenantId, tenant);\n        // Create site\n        const siteId = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n        const site = {\n            id: siteId,\n            tenantId,\n            name: \"Main Warehouse\",\n            address: \"123 Industrial Way, City, ST 12345\"\n        };\n        this.sites.set(siteId, site);\n        // Create second site for demo\n        const site2Id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n        const site2 = {\n            id: site2Id,\n            tenantId,\n            name: \"Distribution Center\",\n            address: \"456 Logistics Blvd, City, ST 12345\"\n        };\n        this.sites.set(site2Id, site2);\n        // Create departments\n        const departments = [\n            {\n                name: \"Receiving\",\n                siteId\n            },\n            {\n                name: \"Stockroom/Kitting\",\n                siteId\n            },\n            {\n                name: \"Production\",\n                siteId\n            },\n            {\n                name: \"Packing/Shipping\",\n                siteId\n            }\n        ];\n        const deptMap = {};\n        departments.forEach((d)=>{\n            const id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n            const dept = {\n                id,\n                tenantId,\n                siteId: d.siteId,\n                name: d.name\n            };\n            this.departments.set(id, dept);\n            deptMap[d.name] = id;\n        });\n        // Create workcells\n        const workcellsData = [\n            {\n                name: \"Receiving Dock 1\",\n                dept: \"Receiving\",\n                description: \"Primary receiving dock\"\n            },\n            {\n                name: \"Receiving Dock 2\",\n                dept: \"Receiving\",\n                description: \"Secondary receiving dock\"\n            },\n            {\n                name: \"Kitting Station A\",\n                dept: \"Stockroom/Kitting\",\n                description: \"Main kitting area\"\n            },\n            {\n                name: \"Kitting Station B\",\n                dept: \"Stockroom/Kitting\",\n                description: \"Secondary kitting\"\n            },\n            {\n                name: \"Pleater 1\",\n                dept: \"Production\",\n                description: \"Primary pleating machine\"\n            },\n            {\n                name: \"Assembly Line 1\",\n                dept: \"Production\",\n                description: \"Main assembly line\"\n            },\n            {\n                name: \"Packing Station 1\",\n                dept: \"Packing/Shipping\",\n                description: \"Primary packing\"\n            },\n            {\n                name: \"Shipping Dock\",\n                dept: \"Packing/Shipping\",\n                description: \"Outbound shipping\"\n            }\n        ];\n        const workcellMap = {};\n        workcellsData.forEach((w)=>{\n            const id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n            const workcell = {\n                id,\n                tenantId,\n                siteId,\n                departmentId: deptMap[w.dept] || null,\n                name: w.name,\n                description: w.description,\n                status: \"active\"\n            };\n            this.workcells.set(id, workcell);\n            workcellMap[w.name] = id;\n        });\n        // Create devices\n        const devicesData = [\n            {\n                name: \"Scanner RD1-A\",\n                type: \"barcode_scanner\",\n                workcell: \"Receiving Dock 1\"\n            },\n            {\n                name: \"Scale RD1-B\",\n                type: \"scale\",\n                workcell: \"Receiving Dock 1\"\n            },\n            {\n                name: \"Scanner KIT-A1\",\n                type: \"barcode_scanner\",\n                workcell: \"Kitting Station A\"\n            },\n            {\n                name: \"Printer KIT-A2\",\n                type: \"label_printer\",\n                workcell: \"Kitting Station A\"\n            },\n            {\n                name: \"PLC Pleater 1\",\n                type: \"plc\",\n                workcell: \"Pleater 1\"\n            },\n            {\n                name: \"HMI Pleater 1\",\n                type: \"hmi\",\n                workcell: \"Pleater 1\"\n            }\n        ];\n        devicesData.forEach((d)=>{\n            const id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n            const device = {\n                id,\n                tenantId,\n                siteId,\n                workcellId: workcellMap[d.workcell] || null,\n                name: d.name,\n                type: d.type,\n                serialNumber: `SN-${Math.random().toString(36).substr(2, 9).toUpperCase()}`,\n                status: \"online\"\n            };\n            this.devices.set(id, device);\n        });\n        // Seed inventory items\n        const itemsData = [\n            {\n                tenantId,\n                sku: \"PAPER-MEDIA\",\n                name: \"Paper Media\",\n                description: \"Pleater paper rolls\",\n                category: \"PRODUCTION\",\n                baseUom: \"FT\",\n                allowedUoms: [\n                    {\n                        uom: \"FT\",\n                        toBase: 1\n                    },\n                    {\n                        uom: \"YD\",\n                        toBase: 3\n                    },\n                    {\n                        uom: \"ROLL\",\n                        toBase: 100\n                    }\n                ],\n                minQtyBase: null,\n                maxQtyBase: null,\n                reorderPointBase: null,\n                leadTimeDays: null\n            },\n            {\n                tenantId,\n                sku: \"CAPS\",\n                name: \"Caps\",\n                description: \"End caps\",\n                category: \"PACKAGING\",\n                baseUom: \"EA\",\n                allowedUoms: [\n                    {\n                        uom: \"EA\",\n                        toBase: 1\n                    }\n                ],\n                minQtyBase: null,\n                maxQtyBase: null,\n                reorderPointBase: null,\n                leadTimeDays: null\n            },\n            {\n                tenantId,\n                sku: \"CORE-MAT\",\n                name: \"Core Material\",\n                description: \"Core material\",\n                category: \"PRODUCTION\",\n                baseUom: \"FT\",\n                allowedUoms: [\n                    {\n                        uom: \"FT\",\n                        toBase: 1\n                    }\n                ],\n                minQtyBase: null,\n                maxQtyBase: null,\n                reorderPointBase: null,\n                leadTimeDays: null\n            }\n        ];\n        itemsData.forEach((item)=>{\n            const id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n            this.items.set(id, {\n                ...item,\n                id\n            });\n        });\n        // Seed inventory locations\n        const locationsData = [\n            {\n                tenantId,\n                siteId,\n                zone: \"RECEIVING\",\n                bin: \"01\",\n                label: \"RECEIVING-01\",\n                type: \"RECEIVING\"\n            },\n            {\n                tenantId,\n                siteId,\n                zone: \"STOCK\",\n                bin: \"A1\",\n                label: \"STOCK-A1\",\n                type: \"STOCK\"\n            },\n            {\n                tenantId,\n                siteId,\n                zone: \"PLEATER\",\n                bin: \"STAGE\",\n                label: \"PLEATER-STAGE\",\n                type: \"WIP\"\n            }\n        ];\n        locationsData.forEach((location)=>{\n            const id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n            this.locations.set(id, {\n                ...location,\n                id\n            });\n        });\n        // Seed reason codes\n        const reasonCodesData = [\n            {\n                tenantId,\n                type: \"SCRAP\",\n                code: \"SCRAP-DAMAGE\",\n                description: \"Damaged material\"\n            },\n            {\n                tenantId,\n                type: \"ADJUST\",\n                code: \"ADJUST-AUDIT\",\n                description: \"Audit correction\"\n            },\n            {\n                tenantId,\n                type: \"HOLD\",\n                code: \"HOLD-QC\",\n                description: \"QC hold\"\n            }\n        ];\n        reasonCodesData.forEach((reason)=>{\n            const id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n            this.reasonCodes.set(id, {\n                ...reason,\n                id\n            });\n        });\n        // Create admin user with hashed password\n        const hashedPassword = bcrypt__WEBPACK_IMPORTED_MODULE_1___default().hashSync(\"password123\", 10);\n        const adminId = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n        const adminUser = {\n            id: adminId,\n            tenantId,\n            email: \"admin@example.com\",\n            password: hashedPassword,\n            firstName: \"John\",\n            lastName: \"Admin\",\n            role: \"Admin\",\n            siteIds: [\n                siteId,\n                site2Id\n            ],\n            isActive: true\n        };\n        this.users.set(adminId, adminUser);\n        // Create additional sample users\n        const sampleUsers = [\n            {\n                email: \"sarah.j@example.com\",\n                firstName: \"Sarah\",\n                lastName: \"Johnson\",\n                role: \"Supervisor\"\n            },\n            {\n                email: \"mike.w@example.com\",\n                firstName: \"Mike\",\n                lastName: \"Wilson\",\n                role: \"Inventory\"\n            },\n            {\n                email: \"emily.d@example.com\",\n                firstName: \"Emily\",\n                lastName: \"Davis\",\n                role: \"Operator\"\n            },\n            {\n                email: \"tom.b@example.com\",\n                firstName: \"Tom\",\n                lastName: \"Brown\",\n                role: \"Viewer\"\n            }\n        ];\n        sampleUsers.forEach((u)=>{\n            const id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n            const user = {\n                id,\n                tenantId,\n                email: u.email,\n                password: hashedPassword,\n                firstName: u.firstName,\n                lastName: u.lastName,\n                role: u.role,\n                siteIds: [\n                    siteId\n                ],\n                isActive: true\n            };\n            this.users.set(id, user);\n        });\n        // Create initial audit events\n        const auditData = [\n            {\n                action: \"CREATE\",\n                entityType: \"Tenant\",\n                entityId: tenantId,\n                details: \"Initial tenant setup\"\n            },\n            {\n                action: \"CREATE\",\n                entityType: \"Site\",\n                entityId: siteId,\n                details: \"Main warehouse created\"\n            },\n            {\n                action: \"CREATE\",\n                entityType: \"User\",\n                entityId: adminId,\n                details: \"Admin user created\"\n            }\n        ];\n        auditData.forEach((a)=>{\n            const id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n            const event = {\n                id,\n                tenantId,\n                userId: adminId,\n                action: a.action,\n                entityType: a.entityType,\n                entityId: a.entityId,\n                details: a.details,\n                ipAddress: \"127.0.0.1\",\n                timestamp: new Date()\n            };\n            this.auditEvents.set(id, event);\n        });\n    }\n    // Users\n    async getUser(id) {\n        return this.users.get(id);\n    }\n    async getUserByEmail(email) {\n        return Array.from(this.users.values()).find((u)=>u.email === email);\n    }\n    async createUser(insertUser) {\n        const id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n        const user = {\n            id,\n            tenantId: insertUser.tenantId,\n            email: insertUser.email,\n            password: insertUser.password,\n            firstName: insertUser.firstName,\n            lastName: insertUser.lastName,\n            role: insertUser.role || \"Viewer\",\n            siteIds: insertUser.siteIds || [],\n            isActive: insertUser.isActive ?? true\n        };\n        this.users.set(id, user);\n        return user;\n    }\n    async getUsersByTenant(tenantId) {\n        return Array.from(this.users.values()).filter((u)=>u.tenantId === tenantId);\n    }\n    async updateUser(id, updates) {\n        const user = this.users.get(id);\n        if (!user) return undefined;\n        const updated = {\n            ...user,\n            ...updates\n        };\n        this.users.set(id, updated);\n        return updated;\n    }\n    // Tenants\n    async getTenant(id) {\n        return this.tenants.get(id);\n    }\n    async getTenantBySlug(slug) {\n        return Array.from(this.tenants.values()).find((t)=>t.slug === slug);\n    }\n    async createTenant(insertTenant) {\n        const id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n        const tenant = {\n            id,\n            name: insertTenant.name,\n            slug: insertTenant.slug,\n            enabledModules: insertTenant.enabledModules || []\n        };\n        this.tenants.set(id, tenant);\n        return tenant;\n    }\n    async updateTenant(id, updates) {\n        const tenant = this.tenants.get(id);\n        if (!tenant) return undefined;\n        const updated = {\n            ...tenant,\n            ...updates\n        };\n        this.tenants.set(id, updated);\n        return updated;\n    }\n    async getTenantsForUser(userId) {\n        const user = this.users.get(userId);\n        if (!user) return [];\n        const tenant = this.tenants.get(user.tenantId);\n        if (!tenant) return [];\n        const sites = await this.getSitesForUser(userId);\n        return [\n            {\n                ...tenant,\n                sites\n            }\n        ];\n    }\n    // Sites\n    async getSite(id) {\n        return this.sites.get(id);\n    }\n    async getSitesByTenant(tenantId) {\n        return Array.from(this.sites.values()).filter((s)=>s.tenantId === tenantId);\n    }\n    async createSite(insertSite) {\n        const id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n        const site = {\n            id,\n            tenantId: insertSite.tenantId,\n            name: insertSite.name,\n            address: insertSite.address ?? null\n        };\n        this.sites.set(id, site);\n        return site;\n    }\n    async updateSite(id, updates) {\n        const site = this.sites.get(id);\n        if (!site) return undefined;\n        const updated = {\n            ...site,\n            ...updates\n        };\n        this.sites.set(id, updated);\n        return updated;\n    }\n    async getSitesForUser(userId) {\n        const user = this.users.get(userId);\n        if (!user) return [];\n        return Array.from(this.sites.values()).filter((s)=>s.tenantId === user.tenantId && user.siteIds.includes(s.id));\n    }\n    // Departments\n    async getDepartment(id) {\n        return this.departments.get(id);\n    }\n    async getDepartmentsBySite(siteId) {\n        return Array.from(this.departments.values()).filter((d)=>d.siteId === siteId);\n    }\n    async createDepartment(insertDepartment) {\n        const id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n        const department = {\n            ...insertDepartment,\n            id\n        };\n        this.departments.set(id, department);\n        return department;\n    }\n    // Workcells\n    async getWorkcell(id) {\n        return this.workcells.get(id);\n    }\n    async getWorkcellsBySite(siteId) {\n        return Array.from(this.workcells.values()).filter((w)=>w.siteId === siteId);\n    }\n    async getWorkcellsByDepartment(departmentId) {\n        return Array.from(this.workcells.values()).filter((w)=>w.departmentId === departmentId);\n    }\n    async createWorkcell(insertWorkcell) {\n        const id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n        const workcell = {\n            id,\n            tenantId: insertWorkcell.tenantId,\n            siteId: insertWorkcell.siteId,\n            departmentId: insertWorkcell.departmentId || null,\n            name: insertWorkcell.name,\n            description: insertWorkcell.description || null,\n            status: insertWorkcell.status || \"active\"\n        };\n        this.workcells.set(id, workcell);\n        return workcell;\n    }\n    async updateWorkcell(id, updates) {\n        const workcell = this.workcells.get(id);\n        if (!workcell) return undefined;\n        const updated = {\n            ...workcell,\n            ...updates\n        };\n        this.workcells.set(id, updated);\n        return updated;\n    }\n    // Devices\n    async getDevice(id) {\n        return this.devices.get(id);\n    }\n    async getDevicesByWorkcell(workcellId) {\n        return Array.from(this.devices.values()).filter((d)=>d.workcellId === workcellId);\n    }\n    async getDevicesBySite(siteId) {\n        return Array.from(this.devices.values()).filter((d)=>d.siteId === siteId);\n    }\n    async createDevice(insertDevice) {\n        const id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n        const device = {\n            id,\n            tenantId: insertDevice.tenantId,\n            siteId: insertDevice.siteId,\n            workcellId: insertDevice.workcellId || null,\n            name: insertDevice.name,\n            type: insertDevice.type,\n            serialNumber: insertDevice.serialNumber || null,\n            status: insertDevice.status || \"online\"\n        };\n        this.devices.set(id, device);\n        return device;\n    }\n    async updateDevice(id, updates) {\n        const device = this.devices.get(id);\n        if (!device) return undefined;\n        const updated = {\n            ...device,\n            ...updates\n        };\n        this.devices.set(id, updated);\n        return updated;\n    }\n    // Badges\n    async getBadge(id) {\n        return this.badges.get(id);\n    }\n    async getBadgeByNumber(badgeNumber, tenantId) {\n        return Array.from(this.badges.values()).find((b)=>b.badgeNumber === badgeNumber && b.tenantId === tenantId);\n    }\n    async getBadgesByUser(userId) {\n        return Array.from(this.badges.values()).filter((b)=>b.userId === userId);\n    }\n    async createBadge(insertBadge) {\n        const id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n        const badge = {\n            id,\n            tenantId: insertBadge.tenantId,\n            userId: insertBadge.userId,\n            badgeNumber: insertBadge.badgeNumber,\n            isActive: insertBadge.isActive ?? true\n        };\n        this.badges.set(id, badge);\n        return badge;\n    }\n    // Audit Events\n    async createAuditEvent(insertEvent) {\n        const id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n        const event = {\n            id,\n            tenantId: insertEvent.tenantId,\n            userId: insertEvent.userId ?? null,\n            action: insertEvent.action,\n            entityType: insertEvent.entityType,\n            entityId: insertEvent.entityId ?? null,\n            details: insertEvent.details ?? null,\n            ipAddress: insertEvent.ipAddress ?? null,\n            timestamp: new Date()\n        };\n        this.auditEvents.set(id, event);\n        return event;\n    }\n    async getAuditEvents(tenantId, limit = 50) {\n        return Array.from(this.auditEvents.values()).filter((e)=>e.tenantId === tenantId).sort((a, b)=>b.timestamp.getTime() - a.timestamp.getTime()).slice(0, limit);\n    }\n    async getAuditEventsByEntity(entityType, entityId) {\n        return Array.from(this.auditEvents.values()).filter((e)=>e.entityType === entityType && e.entityId === entityId).sort((a, b)=>b.timestamp.getTime() - a.timestamp.getTime());\n    }\n    // Inventory Items\n    async getItemsByTenant(tenantId) {\n        return Array.from(this.items.values()).filter((i)=>i.tenantId === tenantId);\n    }\n    async getItemById(id) {\n        return this.items.get(id);\n    }\n    async getItemBySku(tenantId, sku) {\n        return Array.from(this.items.values()).find((i)=>i.tenantId === tenantId && i.sku.toLowerCase() === sku.toLowerCase());\n    }\n    async createItem(item) {\n        const id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n        const created = {\n            ...item,\n            id\n        };\n        this.items.set(id, created);\n        return created;\n    }\n    async updateItem(id, updates) {\n        const item = this.items.get(id);\n        if (!item) return undefined;\n        const updated = {\n            ...item,\n            ...updates\n        };\n        this.items.set(id, updated);\n        return updated;\n    }\n    // Inventory Locations\n    async getLocationsBySite(siteId) {\n        return Array.from(this.locations.values()).filter((l)=>l.siteId === siteId);\n    }\n    async getLocationById(id) {\n        return this.locations.get(id);\n    }\n    async getLocationByLabel(siteId, label) {\n        return Array.from(this.locations.values()).find((l)=>l.siteId === siteId && l.label.toLowerCase() === label.toLowerCase());\n    }\n    async createLocation(location) {\n        const id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n        const created = {\n            ...location,\n            id\n        };\n        this.locations.set(id, created);\n        return created;\n    }\n    async updateLocation(id, updates) {\n        const location = this.locations.get(id);\n        if (!location) return undefined;\n        const updated = {\n            ...location,\n            ...updates\n        };\n        this.locations.set(id, updated);\n        return updated;\n    }\n    // Inventory Reason Codes\n    async getReasonCodesByTenant(tenantId) {\n        return Array.from(this.reasonCodes.values()).filter((r)=>r.tenantId === tenantId);\n    }\n    async getReasonCodeById(id) {\n        return this.reasonCodes.get(id);\n    }\n    async createReasonCode(reasonCode) {\n        const id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n        const created = {\n            ...reasonCode,\n            id\n        };\n        this.reasonCodes.set(id, created);\n        return created;\n    }\n    async updateReasonCode(id, updates) {\n        const reasonCode = this.reasonCodes.get(id);\n        if (!reasonCode) return undefined;\n        const updated = {\n            ...reasonCode,\n            ...updates\n        };\n        this.reasonCodes.set(id, updated);\n        return updated;\n    }\n    // Inventory Events + Balances\n    async createInventoryEvent(event) {\n        const id = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n        const created = {\n            ...event,\n            id,\n            createdAt: new Date()\n        };\n        this.inventoryEvents.set(id, created);\n        return created;\n    }\n    async getInventoryEventsByTenant(tenantId) {\n        return Array.from(this.inventoryEvents.values()).filter((e)=>e.tenantId === tenantId).sort((a, b)=>b.createdAt.getTime() - a.createdAt.getTime());\n    }\n    async getInventoryBalance(tenantId, siteId, itemId, locationId) {\n        const key = `${tenantId}|${siteId}|${itemId}|${locationId}`;\n        return this.inventoryBalances.get(key);\n    }\n    async upsertInventoryBalance(balance) {\n        const key = `${balance.tenantId}|${balance.siteId}|${balance.itemId}|${balance.locationId}`;\n        const existing = this.inventoryBalances.get(key);\n        const created = {\n            id: existing?.id || (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)(),\n            ...balance\n        };\n        this.inventoryBalances.set(key, created);\n        return created;\n    }\n    async getInventoryBalancesBySite(siteId) {\n        return Array.from(this.inventoryBalances.values()).filter((b)=>b.siteId === siteId);\n    }\n    // Session helpers\n    async getSessionUser(userId) {\n        const user = this.users.get(userId);\n        if (!user) return null;\n        const tenant = this.tenants.get(user.tenantId);\n        if (!tenant) return null;\n        return {\n            id: user.id,\n            email: user.email,\n            firstName: user.firstName,\n            lastName: user.lastName,\n            role: user.role,\n            tenantId: user.tenantId,\n            tenantName: tenant.name,\n            siteIds: user.siteIds\n        };\n    }\n}\nconst storage = new MemStorage();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUV6SCxNQUFNLEtBQUtBO0lBQ2hGO0lBRUEsa0JBQWtCO0lBQ2xCLE1BQU1zSyxlQUFlbkcsTUFBYyxFQUErQjtRQUNoRSxNQUFNUixPQUFPLElBQUksQ0FBQ2pGLEtBQUssQ0FBQzhGLEdBQUcsQ0FBQ0w7UUFDNUIsSUFBSSxDQUFDUixNQUFNLE9BQU87UUFFbEIsTUFBTWpFLFNBQVMsSUFBSSxDQUFDZCxPQUFPLENBQUM0RixHQUFHLENBQUNiLEtBQUtsRSxRQUFRO1FBQzdDLElBQUksQ0FBQ0MsUUFBUSxPQUFPO1FBRXBCLE9BQU87WUFDTEMsSUFBSWdFLEtBQUtoRSxFQUFFO1lBQ1h1RCxPQUFPUyxLQUFLVCxLQUFLO1lBQ2pCRSxXQUFXTyxLQUFLUCxTQUFTO1lBQ3pCQyxVQUFVTSxLQUFLTixRQUFRO1lBQ3ZCQyxNQUFNSyxLQUFLTCxJQUFJO1lBQ2Y3RCxVQUFVa0UsS0FBS2xFLFFBQVE7WUFDdkI4SyxZQUFZN0ssT0FBT0UsSUFBSTtZQUN2QjJELFNBQVNJLEtBQUtKLE9BQU87UUFDdkI7SUFDRjtBQUNGO0FBRU8sTUFBTWlILFVBQVUsSUFBSWhNLGFBQWEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZXN0LWV4cHJlc3MvLi9zZXJ2ZXIvc3RvcmFnZS50cz9jYzQ4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHR5cGUgVXNlcixcbiAgdHlwZSBJbnNlcnRVc2VyLFxuICB0eXBlIFRlbmFudCxcbiAgdHlwZSBJbnNlcnRUZW5hbnQsXG4gIHR5cGUgU2l0ZSxcbiAgdHlwZSBJbnNlcnRTaXRlLFxuICB0eXBlIERlcGFydG1lbnQsXG4gIHR5cGUgSW5zZXJ0RGVwYXJ0bWVudCxcbiAgdHlwZSBXb3JrY2VsbCxcbiAgdHlwZSBJbnNlcnRXb3JrY2VsbCxcbiAgdHlwZSBEZXZpY2UsXG4gIHR5cGUgSW5zZXJ0RGV2aWNlLFxuICB0eXBlIEJhZGdlLFxuICB0eXBlIEluc2VydEJhZGdlLFxuICB0eXBlIEF1ZGl0RXZlbnQsXG4gIHR5cGUgSW5zZXJ0QXVkaXRFdmVudCxcbiAgdHlwZSBTZXNzaW9uVXNlcixcbiAgdHlwZSBUZW5hbnRXaXRoU2l0ZXMsXG59IGZyb20gXCJAc2hhcmVkL3NjaGVtYVwiO1xuaW1wb3J0IHtcbiAgdHlwZSBJdGVtLFxuICB0eXBlIExvY2F0aW9uLFxuICB0eXBlIFJlYXNvbkNvZGUsXG4gIHR5cGUgSW52ZW50b3J5RXZlbnQsXG4gIHR5cGUgSW52ZW50b3J5QmFsYW5jZSxcbn0gZnJvbSBcIkBzaGFyZWQvaW52ZW50b3J5XCI7XG5pbXBvcnQgeyByYW5kb21VVUlEIH0gZnJvbSBcImNyeXB0b1wiO1xuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVN0b3JhZ2Uge1xuICAvLyBVc2Vyc1xuICBnZXRVc2VyKGlkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCB1bmRlZmluZWQ+O1xuICBnZXRVc2VyQnlFbWFpbChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgdW5kZWZpbmVkPjtcbiAgY3JlYXRlVXNlcih1c2VyOiBJbnNlcnRVc2VyKTogUHJvbWlzZTxVc2VyPjtcbiAgZ2V0VXNlcnNCeVRlbmFudCh0ZW5hbnRJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyW10+O1xuICB1cGRhdGVVc2VyKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8VXNlcj4pOiBQcm9taXNlPFVzZXIgfCB1bmRlZmluZWQ+O1xuXG4gIC8vIFRlbmFudHNcbiAgZ2V0VGVuYW50KGlkOiBzdHJpbmcpOiBQcm9taXNlPFRlbmFudCB8IHVuZGVmaW5lZD47XG4gIGdldFRlbmFudEJ5U2x1ZyhzbHVnOiBzdHJpbmcpOiBQcm9taXNlPFRlbmFudCB8IHVuZGVmaW5lZD47XG4gIGNyZWF0ZVRlbmFudCh0ZW5hbnQ6IEluc2VydFRlbmFudCk6IFByb21pc2U8VGVuYW50PjtcbiAgdXBkYXRlVGVuYW50KGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8VGVuYW50Pik6IFByb21pc2U8VGVuYW50IHwgdW5kZWZpbmVkPjtcbiAgZ2V0VGVuYW50c0ZvclVzZXIodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFRlbmFudFdpdGhTaXRlc1tdPjtcblxuICAvLyBTaXRlc1xuICBnZXRTaXRlKGlkOiBzdHJpbmcpOiBQcm9taXNlPFNpdGUgfCB1bmRlZmluZWQ+O1xuICBnZXRTaXRlc0J5VGVuYW50KHRlbmFudElkOiBzdHJpbmcpOiBQcm9taXNlPFNpdGVbXT47XG4gIGNyZWF0ZVNpdGUoc2l0ZTogSW5zZXJ0U2l0ZSk6IFByb21pc2U8U2l0ZT47XG4gIHVwZGF0ZVNpdGUoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxTaXRlPik6IFByb21pc2U8U2l0ZSB8IHVuZGVmaW5lZD47XG5cbiAgLy8gRGVwYXJ0bWVudHNcbiAgZ2V0RGVwYXJ0bWVudChpZDogc3RyaW5nKTogUHJvbWlzZTxEZXBhcnRtZW50IHwgdW5kZWZpbmVkPjtcbiAgZ2V0RGVwYXJ0bWVudHNCeVNpdGUoc2l0ZUlkOiBzdHJpbmcpOiBQcm9taXNlPERlcGFydG1lbnRbXT47XG4gIGNyZWF0ZURlcGFydG1lbnQoZGVwYXJ0bWVudDogSW5zZXJ0RGVwYXJ0bWVudCk6IFByb21pc2U8RGVwYXJ0bWVudD47XG5cbiAgLy8gV29ya2NlbGxzXG4gIGdldFdvcmtjZWxsKGlkOiBzdHJpbmcpOiBQcm9taXNlPFdvcmtjZWxsIHwgdW5kZWZpbmVkPjtcbiAgZ2V0V29ya2NlbGxzQnlTaXRlKHNpdGVJZDogc3RyaW5nKTogUHJvbWlzZTxXb3JrY2VsbFtdPjtcbiAgZ2V0V29ya2NlbGxzQnlEZXBhcnRtZW50KGRlcGFydG1lbnRJZDogc3RyaW5nKTogUHJvbWlzZTxXb3JrY2VsbFtdPjtcbiAgY3JlYXRlV29ya2NlbGwod29ya2NlbGw6IEluc2VydFdvcmtjZWxsKTogUHJvbWlzZTxXb3JrY2VsbD47XG4gIHVwZGF0ZVdvcmtjZWxsKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8V29ya2NlbGw+KTogUHJvbWlzZTxXb3JrY2VsbCB8IHVuZGVmaW5lZD47XG5cbiAgLy8gRGV2aWNlc1xuICBnZXREZXZpY2UoaWQ6IHN0cmluZyk6IFByb21pc2U8RGV2aWNlIHwgdW5kZWZpbmVkPjtcbiAgZ2V0RGV2aWNlc0J5V29ya2NlbGwod29ya2NlbGxJZDogc3RyaW5nKTogUHJvbWlzZTxEZXZpY2VbXT47XG4gIGdldERldmljZXNCeVNpdGUoc2l0ZUlkOiBzdHJpbmcpOiBQcm9taXNlPERldmljZVtdPjtcbiAgY3JlYXRlRGV2aWNlKGRldmljZTogSW5zZXJ0RGV2aWNlKTogUHJvbWlzZTxEZXZpY2U+O1xuICB1cGRhdGVEZXZpY2UoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxEZXZpY2U+KTogUHJvbWlzZTxEZXZpY2UgfCB1bmRlZmluZWQ+O1xuXG4gIC8vIEJhZGdlc1xuICBnZXRCYWRnZShpZDogc3RyaW5nKTogUHJvbWlzZTxCYWRnZSB8IHVuZGVmaW5lZD47XG4gIGdldEJhZGdlQnlOdW1iZXIoYmFkZ2VOdW1iZXI6IHN0cmluZywgdGVuYW50SWQ6IHN0cmluZyk6IFByb21pc2U8QmFkZ2UgfCB1bmRlZmluZWQ+O1xuICBnZXRCYWRnZXNCeVVzZXIodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEJhZGdlW10+O1xuICBjcmVhdGVCYWRnZShiYWRnZTogSW5zZXJ0QmFkZ2UpOiBQcm9taXNlPEJhZGdlPjtcblxuICAvLyBBdWRpdCBFdmVudHNcbiAgY3JlYXRlQXVkaXRFdmVudChldmVudDogSW5zZXJ0QXVkaXRFdmVudCk6IFByb21pc2U8QXVkaXRFdmVudD47XG4gIGdldEF1ZGl0RXZlbnRzKHRlbmFudElkOiBzdHJpbmcsIGxpbWl0PzogbnVtYmVyKTogUHJvbWlzZTxBdWRpdEV2ZW50W10+O1xuICBnZXRBdWRpdEV2ZW50c0J5RW50aXR5KGVudGl0eVR5cGU6IHN0cmluZywgZW50aXR5SWQ6IHN0cmluZyk6IFByb21pc2U8QXVkaXRFdmVudFtdPjtcblxuICAvLyBJbnZlbnRvcnkgSXRlbXNcbiAgZ2V0SXRlbXNCeVRlbmFudCh0ZW5hbnRJZDogc3RyaW5nKTogUHJvbWlzZTxJdGVtW10+O1xuICBnZXRJdGVtQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxJdGVtIHwgdW5kZWZpbmVkPjtcbiAgZ2V0SXRlbUJ5U2t1KHRlbmFudElkOiBzdHJpbmcsIHNrdTogc3RyaW5nKTogUHJvbWlzZTxJdGVtIHwgdW5kZWZpbmVkPjtcbiAgY3JlYXRlSXRlbShpdGVtOiBPbWl0PEl0ZW0sIFwiaWRcIj4pOiBQcm9taXNlPEl0ZW0+O1xuICB1cGRhdGVJdGVtKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8SXRlbT4pOiBQcm9taXNlPEl0ZW0gfCB1bmRlZmluZWQ+O1xuXG4gIC8vIEludmVudG9yeSBMb2NhdGlvbnNcbiAgZ2V0TG9jYXRpb25zQnlTaXRlKHNpdGVJZDogc3RyaW5nKTogUHJvbWlzZTxMb2NhdGlvbltdPjtcbiAgZ2V0TG9jYXRpb25CeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPExvY2F0aW9uIHwgdW5kZWZpbmVkPjtcbiAgZ2V0TG9jYXRpb25CeUxhYmVsKHNpdGVJZDogc3RyaW5nLCBsYWJlbDogc3RyaW5nKTogUHJvbWlzZTxMb2NhdGlvbiB8IHVuZGVmaW5lZD47XG4gIGNyZWF0ZUxvY2F0aW9uKGxvY2F0aW9uOiBPbWl0PExvY2F0aW9uLCBcImlkXCI+KTogUHJvbWlzZTxMb2NhdGlvbj47XG4gIHVwZGF0ZUxvY2F0aW9uKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8TG9jYXRpb24+KTogUHJvbWlzZTxMb2NhdGlvbiB8IHVuZGVmaW5lZD47XG5cbiAgLy8gSW52ZW50b3J5IFJlYXNvbiBDb2Rlc1xuICBnZXRSZWFzb25Db2Rlc0J5VGVuYW50KHRlbmFudElkOiBzdHJpbmcpOiBQcm9taXNlPFJlYXNvbkNvZGVbXT47XG4gIGdldFJlYXNvbkNvZGVCeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPFJlYXNvbkNvZGUgfCB1bmRlZmluZWQ+O1xuICBjcmVhdGVSZWFzb25Db2RlKHJlYXNvbkNvZGU6IE9taXQ8UmVhc29uQ29kZSwgXCJpZFwiPik6IFByb21pc2U8UmVhc29uQ29kZT47XG4gIHVwZGF0ZVJlYXNvbkNvZGUoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxSZWFzb25Db2RlPik6IFByb21pc2U8UmVhc29uQ29kZSB8IHVuZGVmaW5lZD47XG5cbiAgLy8gSW52ZW50b3J5IEV2ZW50cyArIEJhbGFuY2VzXG4gIGNyZWF0ZUludmVudG9yeUV2ZW50KGV2ZW50OiBPbWl0PEludmVudG9yeUV2ZW50LCBcImlkXCIgfCBcImNyZWF0ZWRBdFwiPik6IFByb21pc2U8SW52ZW50b3J5RXZlbnQ+O1xuICBnZXRJbnZlbnRvcnlFdmVudHNCeVRlbmFudCh0ZW5hbnRJZDogc3RyaW5nKTogUHJvbWlzZTxJbnZlbnRvcnlFdmVudFtdPjtcbiAgZ2V0SW52ZW50b3J5QmFsYW5jZShcbiAgICB0ZW5hbnRJZDogc3RyaW5nLFxuICAgIHNpdGVJZDogc3RyaW5nLFxuICAgIGl0ZW1JZDogc3RyaW5nLFxuICAgIGxvY2F0aW9uSWQ6IHN0cmluZyxcbiAgKTogUHJvbWlzZTxJbnZlbnRvcnlCYWxhbmNlIHwgdW5kZWZpbmVkPjtcbiAgdXBzZXJ0SW52ZW50b3J5QmFsYW5jZShcbiAgICBiYWxhbmNlOiBPbWl0PEludmVudG9yeUJhbGFuY2UsIFwiaWRcIj4sXG4gICk6IFByb21pc2U8SW52ZW50b3J5QmFsYW5jZT47XG4gIGdldEludmVudG9yeUJhbGFuY2VzQnlTaXRlKHNpdGVJZDogc3RyaW5nKTogUHJvbWlzZTxJbnZlbnRvcnlCYWxhbmNlW10+O1xuXG4gIC8vIFNlc3Npb24gaGVscGVyc1xuICBnZXRTZXNzaW9uVXNlcih1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8U2Vzc2lvblVzZXIgfCBudWxsPjtcbiAgZ2V0U2l0ZXNGb3JVc2VyKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxTaXRlW10+O1xufVxuXG5leHBvcnQgY2xhc3MgTWVtU3RvcmFnZSBpbXBsZW1lbnRzIElTdG9yYWdlIHtcbiAgcHJpdmF0ZSB1c2VyczogTWFwPHN0cmluZywgVXNlcj4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgdGVuYW50czogTWFwPHN0cmluZywgVGVuYW50PiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBzaXRlczogTWFwPHN0cmluZywgU2l0ZT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgZGVwYXJ0bWVudHM6IE1hcDxzdHJpbmcsIERlcGFydG1lbnQ+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIHdvcmtjZWxsczogTWFwPHN0cmluZywgV29ya2NlbGw+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIGRldmljZXM6IE1hcDxzdHJpbmcsIERldmljZT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgYmFkZ2VzOiBNYXA8c3RyaW5nLCBCYWRnZT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgYXVkaXRFdmVudHM6IE1hcDxzdHJpbmcsIEF1ZGl0RXZlbnQ+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIGl0ZW1zOiBNYXA8c3RyaW5nLCBJdGVtPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBsb2NhdGlvbnM6IE1hcDxzdHJpbmcsIExvY2F0aW9uPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSByZWFzb25Db2RlczogTWFwPHN0cmluZywgUmVhc29uQ29kZT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgaW52ZW50b3J5RXZlbnRzOiBNYXA8c3RyaW5nLCBJbnZlbnRvcnlFdmVudD4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgaW52ZW50b3J5QmFsYW5jZXM6IE1hcDxzdHJpbmcsIEludmVudG9yeUJhbGFuY2U+ID0gbmV3IE1hcCgpO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuc2VlZERhdGEoKTtcbiAgfVxuXG4gIHByaXZhdGUgc2VlZERhdGEoKSB7XG4gICAgLy8gQ3JlYXRlIHRlbmFudFxuICAgIGNvbnN0IHRlbmFudElkID0gcmFuZG9tVVVJRCgpO1xuICAgIGNvbnN0IHRlbmFudDogVGVuYW50ID0ge1xuICAgICAgaWQ6IHRlbmFudElkLFxuICAgICAgbmFtZTogXCJBY21lIFdhcmVob3VzZVwiLFxuICAgICAgc2x1ZzogXCJhY21lXCIsXG4gICAgICBlbmFibGVkTW9kdWxlczogW1xuICAgICAgICBcImludmVudG9yeVwiLFxuICAgICAgICBcImpvYnNcIixcbiAgICAgICAgXCJwdXJjaGFzaW5nXCIsXG4gICAgICAgIFwiY3ljbGUtY291bnRzXCIsXG4gICAgICAgIFwibWFpbnRlbmFuY2VcIixcbiAgICAgICAgXCJzYWxlcy1hdHBcIixcbiAgICAgICAgXCJkYXNoYm9hcmRzXCIsXG4gICAgICBdLFxuICAgIH07XG4gICAgdGhpcy50ZW5hbnRzLnNldCh0ZW5hbnRJZCwgdGVuYW50KTtcblxuICAgIC8vIENyZWF0ZSBzaXRlXG4gICAgY29uc3Qgc2l0ZUlkID0gcmFuZG9tVVVJRCgpO1xuICAgIGNvbnN0IHNpdGU6IFNpdGUgPSB7XG4gICAgICBpZDogc2l0ZUlkLFxuICAgICAgdGVuYW50SWQsXG4gICAgICBuYW1lOiBcIk1haW4gV2FyZWhvdXNlXCIsXG4gICAgICBhZGRyZXNzOiBcIjEyMyBJbmR1c3RyaWFsIFdheSwgQ2l0eSwgU1QgMTIzNDVcIixcbiAgICB9O1xuICAgIHRoaXMuc2l0ZXMuc2V0KHNpdGVJZCwgc2l0ZSk7XG5cbiAgICAvLyBDcmVhdGUgc2Vjb25kIHNpdGUgZm9yIGRlbW9cbiAgICBjb25zdCBzaXRlMklkID0gcmFuZG9tVVVJRCgpO1xuICAgIGNvbnN0IHNpdGUyOiBTaXRlID0ge1xuICAgICAgaWQ6IHNpdGUySWQsXG4gICAgICB0ZW5hbnRJZCxcbiAgICAgIG5hbWU6IFwiRGlzdHJpYnV0aW9uIENlbnRlclwiLFxuICAgICAgYWRkcmVzczogXCI0NTYgTG9naXN0aWNzIEJsdmQsIENpdHksIFNUIDEyMzQ1XCIsXG4gICAgfTtcbiAgICB0aGlzLnNpdGVzLnNldChzaXRlMklkLCBzaXRlMik7XG5cbiAgICAvLyBDcmVhdGUgZGVwYXJ0bWVudHNcbiAgICBjb25zdCBkZXBhcnRtZW50cyA9IFtcbiAgICAgIHsgbmFtZTogXCJSZWNlaXZpbmdcIiwgc2l0ZUlkIH0sXG4gICAgICB7IG5hbWU6IFwiU3RvY2tyb29tL0tpdHRpbmdcIiwgc2l0ZUlkIH0sXG4gICAgICB7IG5hbWU6IFwiUHJvZHVjdGlvblwiLCBzaXRlSWQgfSxcbiAgICAgIHsgbmFtZTogXCJQYWNraW5nL1NoaXBwaW5nXCIsIHNpdGVJZCB9LFxuICAgIF07XG5cbiAgICBjb25zdCBkZXB0TWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gICAgZGVwYXJ0bWVudHMuZm9yRWFjaCgoZCkgPT4ge1xuICAgICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgICBjb25zdCBkZXB0OiBEZXBhcnRtZW50ID0ge1xuICAgICAgICBpZCxcbiAgICAgICAgdGVuYW50SWQsXG4gICAgICAgIHNpdGVJZDogZC5zaXRlSWQsXG4gICAgICAgIG5hbWU6IGQubmFtZSxcbiAgICAgIH07XG4gICAgICB0aGlzLmRlcGFydG1lbnRzLnNldChpZCwgZGVwdCk7XG4gICAgICBkZXB0TWFwW2QubmFtZV0gPSBpZDtcbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSB3b3JrY2VsbHNcbiAgICBjb25zdCB3b3JrY2VsbHNEYXRhID0gW1xuICAgICAgeyBuYW1lOiBcIlJlY2VpdmluZyBEb2NrIDFcIiwgZGVwdDogXCJSZWNlaXZpbmdcIiwgZGVzY3JpcHRpb246IFwiUHJpbWFyeSByZWNlaXZpbmcgZG9ja1wiIH0sXG4gICAgICB7IG5hbWU6IFwiUmVjZWl2aW5nIERvY2sgMlwiLCBkZXB0OiBcIlJlY2VpdmluZ1wiLCBkZXNjcmlwdGlvbjogXCJTZWNvbmRhcnkgcmVjZWl2aW5nIGRvY2tcIiB9LFxuICAgICAgeyBuYW1lOiBcIktpdHRpbmcgU3RhdGlvbiBBXCIsIGRlcHQ6IFwiU3RvY2tyb29tL0tpdHRpbmdcIiwgZGVzY3JpcHRpb246IFwiTWFpbiBraXR0aW5nIGFyZWFcIiB9LFxuICAgICAgeyBuYW1lOiBcIktpdHRpbmcgU3RhdGlvbiBCXCIsIGRlcHQ6IFwiU3RvY2tyb29tL0tpdHRpbmdcIiwgZGVzY3JpcHRpb246IFwiU2Vjb25kYXJ5IGtpdHRpbmdcIiB9LFxuICAgICAgeyBuYW1lOiBcIlBsZWF0ZXIgMVwiLCBkZXB0OiBcIlByb2R1Y3Rpb25cIiwgZGVzY3JpcHRpb246IFwiUHJpbWFyeSBwbGVhdGluZyBtYWNoaW5lXCIgfSxcbiAgICAgIHsgbmFtZTogXCJBc3NlbWJseSBMaW5lIDFcIiwgZGVwdDogXCJQcm9kdWN0aW9uXCIsIGRlc2NyaXB0aW9uOiBcIk1haW4gYXNzZW1ibHkgbGluZVwiIH0sXG4gICAgICB7IG5hbWU6IFwiUGFja2luZyBTdGF0aW9uIDFcIiwgZGVwdDogXCJQYWNraW5nL1NoaXBwaW5nXCIsIGRlc2NyaXB0aW9uOiBcIlByaW1hcnkgcGFja2luZ1wiIH0sXG4gICAgICB7IG5hbWU6IFwiU2hpcHBpbmcgRG9ja1wiLCBkZXB0OiBcIlBhY2tpbmcvU2hpcHBpbmdcIiwgZGVzY3JpcHRpb246IFwiT3V0Ym91bmQgc2hpcHBpbmdcIiB9LFxuICAgIF07XG5cbiAgICBjb25zdCB3b3JrY2VsbE1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICAgIHdvcmtjZWxsc0RhdGEuZm9yRWFjaCgodykgPT4ge1xuICAgICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgICBjb25zdCB3b3JrY2VsbDogV29ya2NlbGwgPSB7XG4gICAgICAgIGlkLFxuICAgICAgICB0ZW5hbnRJZCxcbiAgICAgICAgc2l0ZUlkLFxuICAgICAgICBkZXBhcnRtZW50SWQ6IGRlcHRNYXBbdy5kZXB0XSB8fCBudWxsLFxuICAgICAgICBuYW1lOiB3Lm5hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiB3LmRlc2NyaXB0aW9uLFxuICAgICAgICBzdGF0dXM6IFwiYWN0aXZlXCIsXG4gICAgICB9O1xuICAgICAgdGhpcy53b3JrY2VsbHMuc2V0KGlkLCB3b3JrY2VsbCk7XG4gICAgICB3b3JrY2VsbE1hcFt3Lm5hbWVdID0gaWQ7XG4gICAgfSk7XG5cbiAgICAvLyBDcmVhdGUgZGV2aWNlc1xuICAgIGNvbnN0IGRldmljZXNEYXRhID0gW1xuICAgICAgeyBuYW1lOiBcIlNjYW5uZXIgUkQxLUFcIiwgdHlwZTogXCJiYXJjb2RlX3NjYW5uZXJcIiwgd29ya2NlbGw6IFwiUmVjZWl2aW5nIERvY2sgMVwiIH0sXG4gICAgICB7IG5hbWU6IFwiU2NhbGUgUkQxLUJcIiwgdHlwZTogXCJzY2FsZVwiLCB3b3JrY2VsbDogXCJSZWNlaXZpbmcgRG9jayAxXCIgfSxcbiAgICAgIHsgbmFtZTogXCJTY2FubmVyIEtJVC1BMVwiLCB0eXBlOiBcImJhcmNvZGVfc2Nhbm5lclwiLCB3b3JrY2VsbDogXCJLaXR0aW5nIFN0YXRpb24gQVwiIH0sXG4gICAgICB7IG5hbWU6IFwiUHJpbnRlciBLSVQtQTJcIiwgdHlwZTogXCJsYWJlbF9wcmludGVyXCIsIHdvcmtjZWxsOiBcIktpdHRpbmcgU3RhdGlvbiBBXCIgfSxcbiAgICAgIHsgbmFtZTogXCJQTEMgUGxlYXRlciAxXCIsIHR5cGU6IFwicGxjXCIsIHdvcmtjZWxsOiBcIlBsZWF0ZXIgMVwiIH0sXG4gICAgICB7IG5hbWU6IFwiSE1JIFBsZWF0ZXIgMVwiLCB0eXBlOiBcImhtaVwiLCB3b3JrY2VsbDogXCJQbGVhdGVyIDFcIiB9LFxuICAgIF07XG5cbiAgICBkZXZpY2VzRGF0YS5mb3JFYWNoKChkKSA9PiB7XG4gICAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICAgIGNvbnN0IGRldmljZTogRGV2aWNlID0ge1xuICAgICAgICBpZCxcbiAgICAgICAgdGVuYW50SWQsXG4gICAgICAgIHNpdGVJZCxcbiAgICAgICAgd29ya2NlbGxJZDogd29ya2NlbGxNYXBbZC53b3JrY2VsbF0gfHwgbnVsbCxcbiAgICAgICAgbmFtZTogZC5uYW1lLFxuICAgICAgICB0eXBlOiBkLnR5cGUsXG4gICAgICAgIHNlcmlhbE51bWJlcjogYFNOLSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpLnRvVXBwZXJDYXNlKCl9YCxcbiAgICAgICAgc3RhdHVzOiBcIm9ubGluZVwiLFxuICAgICAgfTtcbiAgICAgIHRoaXMuZGV2aWNlcy5zZXQoaWQsIGRldmljZSk7XG4gICAgfSk7XG5cbiAgICAvLyBTZWVkIGludmVudG9yeSBpdGVtc1xuICAgIGNvbnN0IGl0ZW1zRGF0YTogT21pdDxJdGVtLCBcImlkXCI+W10gPSBbXG4gICAgICB7XG4gICAgICAgIHRlbmFudElkLFxuICAgICAgICBza3U6IFwiUEFQRVItTUVESUFcIixcbiAgICAgICAgbmFtZTogXCJQYXBlciBNZWRpYVwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJQbGVhdGVyIHBhcGVyIHJvbGxzXCIsXG4gICAgICAgIGNhdGVnb3J5OiBcIlBST0RVQ1RJT05cIixcbiAgICAgICAgYmFzZVVvbTogXCJGVFwiLFxuICAgICAgICBhbGxvd2VkVW9tczogW1xuICAgICAgICAgIHsgdW9tOiBcIkZUXCIsIHRvQmFzZTogMSB9LFxuICAgICAgICAgIHsgdW9tOiBcIllEXCIsIHRvQmFzZTogMyB9LFxuICAgICAgICAgIHsgdW9tOiBcIlJPTExcIiwgdG9CYXNlOiAxMDAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgbWluUXR5QmFzZTogbnVsbCxcbiAgICAgICAgbWF4UXR5QmFzZTogbnVsbCxcbiAgICAgICAgcmVvcmRlclBvaW50QmFzZTogbnVsbCxcbiAgICAgICAgbGVhZFRpbWVEYXlzOiBudWxsLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGVuYW50SWQsXG4gICAgICAgIHNrdTogXCJDQVBTXCIsXG4gICAgICAgIG5hbWU6IFwiQ2Fwc1wiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJFbmQgY2Fwc1wiLFxuICAgICAgICBjYXRlZ29yeTogXCJQQUNLQUdJTkdcIixcbiAgICAgICAgYmFzZVVvbTogXCJFQVwiLFxuICAgICAgICBhbGxvd2VkVW9tczogW3sgdW9tOiBcIkVBXCIsIHRvQmFzZTogMSB9XSxcbiAgICAgICAgbWluUXR5QmFzZTogbnVsbCxcbiAgICAgICAgbWF4UXR5QmFzZTogbnVsbCxcbiAgICAgICAgcmVvcmRlclBvaW50QmFzZTogbnVsbCxcbiAgICAgICAgbGVhZFRpbWVEYXlzOiBudWxsLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGVuYW50SWQsXG4gICAgICAgIHNrdTogXCJDT1JFLU1BVFwiLFxuICAgICAgICBuYW1lOiBcIkNvcmUgTWF0ZXJpYWxcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQ29yZSBtYXRlcmlhbFwiLFxuICAgICAgICBjYXRlZ29yeTogXCJQUk9EVUNUSU9OXCIsXG4gICAgICAgIGJhc2VVb206IFwiRlRcIixcbiAgICAgICAgYWxsb3dlZFVvbXM6IFt7IHVvbTogXCJGVFwiLCB0b0Jhc2U6IDEgfV0sXG4gICAgICAgIG1pblF0eUJhc2U6IG51bGwsXG4gICAgICAgIG1heFF0eUJhc2U6IG51bGwsXG4gICAgICAgIHJlb3JkZXJQb2ludEJhc2U6IG51bGwsXG4gICAgICAgIGxlYWRUaW1lRGF5czogbnVsbCxcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIGl0ZW1zRGF0YS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICAgIHRoaXMuaXRlbXMuc2V0KGlkLCB7IC4uLml0ZW0sIGlkIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gU2VlZCBpbnZlbnRvcnkgbG9jYXRpb25zXG4gICAgY29uc3QgbG9jYXRpb25zRGF0YTogT21pdDxMb2NhdGlvbiwgXCJpZFwiPltdID0gW1xuICAgICAge1xuICAgICAgICB0ZW5hbnRJZCxcbiAgICAgICAgc2l0ZUlkLFxuICAgICAgICB6b25lOiBcIlJFQ0VJVklOR1wiLFxuICAgICAgICBiaW46IFwiMDFcIixcbiAgICAgICAgbGFiZWw6IFwiUkVDRUlWSU5HLTAxXCIsXG4gICAgICAgIHR5cGU6IFwiUkVDRUlWSU5HXCIsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0ZW5hbnRJZCxcbiAgICAgICAgc2l0ZUlkLFxuICAgICAgICB6b25lOiBcIlNUT0NLXCIsXG4gICAgICAgIGJpbjogXCJBMVwiLFxuICAgICAgICBsYWJlbDogXCJTVE9DSy1BMVwiLFxuICAgICAgICB0eXBlOiBcIlNUT0NLXCIsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0ZW5hbnRJZCxcbiAgICAgICAgc2l0ZUlkLFxuICAgICAgICB6b25lOiBcIlBMRUFURVJcIixcbiAgICAgICAgYmluOiBcIlNUQUdFXCIsXG4gICAgICAgIGxhYmVsOiBcIlBMRUFURVItU1RBR0VcIixcbiAgICAgICAgdHlwZTogXCJXSVBcIixcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIGxvY2F0aW9uc0RhdGEuZm9yRWFjaCgobG9jYXRpb24pID0+IHtcbiAgICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgICAgdGhpcy5sb2NhdGlvbnMuc2V0KGlkLCB7IC4uLmxvY2F0aW9uLCBpZCB9KTtcbiAgICB9KTtcblxuICAgIC8vIFNlZWQgcmVhc29uIGNvZGVzXG4gICAgY29uc3QgcmVhc29uQ29kZXNEYXRhOiBPbWl0PFJlYXNvbkNvZGUsIFwiaWRcIj5bXSA9IFtcbiAgICAgIHsgdGVuYW50SWQsIHR5cGU6IFwiU0NSQVBcIiwgY29kZTogXCJTQ1JBUC1EQU1BR0VcIiwgZGVzY3JpcHRpb246IFwiRGFtYWdlZCBtYXRlcmlhbFwiIH0sXG4gICAgICB7IHRlbmFudElkLCB0eXBlOiBcIkFESlVTVFwiLCBjb2RlOiBcIkFESlVTVC1BVURJVFwiLCBkZXNjcmlwdGlvbjogXCJBdWRpdCBjb3JyZWN0aW9uXCIgfSxcbiAgICAgIHsgdGVuYW50SWQsIHR5cGU6IFwiSE9MRFwiLCBjb2RlOiBcIkhPTEQtUUNcIiwgZGVzY3JpcHRpb246IFwiUUMgaG9sZFwiIH0sXG4gICAgXTtcblxuICAgIHJlYXNvbkNvZGVzRGF0YS5mb3JFYWNoKChyZWFzb24pID0+IHtcbiAgICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgICAgdGhpcy5yZWFzb25Db2Rlcy5zZXQoaWQsIHsgLi4ucmVhc29uLCBpZCB9KTtcbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSBhZG1pbiB1c2VyIHdpdGggaGFzaGVkIHBhc3N3b3JkXG4gICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBiY3J5cHQuaGFzaFN5bmMoXCJwYXNzd29yZDEyM1wiLCAxMCk7XG4gICAgY29uc3QgYWRtaW5JZCA9IHJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBhZG1pblVzZXI6IFVzZXIgPSB7XG4gICAgICBpZDogYWRtaW5JZCxcbiAgICAgIHRlbmFudElkLFxuICAgICAgZW1haWw6IFwiYWRtaW5AZXhhbXBsZS5jb21cIixcbiAgICAgIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCxcbiAgICAgIGZpcnN0TmFtZTogXCJKb2huXCIsXG4gICAgICBsYXN0TmFtZTogXCJBZG1pblwiLFxuICAgICAgcm9sZTogXCJBZG1pblwiLFxuICAgICAgc2l0ZUlkczogW3NpdGVJZCwgc2l0ZTJJZF0sXG4gICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICB9O1xuICAgIHRoaXMudXNlcnMuc2V0KGFkbWluSWQsIGFkbWluVXNlcik7XG5cbiAgICAvLyBDcmVhdGUgYWRkaXRpb25hbCBzYW1wbGUgdXNlcnNcbiAgICBjb25zdCBzYW1wbGVVc2VycyA9IFtcbiAgICAgIHsgZW1haWw6IFwic2FyYWguakBleGFtcGxlLmNvbVwiLCBmaXJzdE5hbWU6IFwiU2FyYWhcIiwgbGFzdE5hbWU6IFwiSm9obnNvblwiLCByb2xlOiBcIlN1cGVydmlzb3JcIiB9LFxuICAgICAgeyBlbWFpbDogXCJtaWtlLndAZXhhbXBsZS5jb21cIiwgZmlyc3ROYW1lOiBcIk1pa2VcIiwgbGFzdE5hbWU6IFwiV2lsc29uXCIsIHJvbGU6IFwiSW52ZW50b3J5XCIgfSxcbiAgICAgIHsgZW1haWw6IFwiZW1pbHkuZEBleGFtcGxlLmNvbVwiLCBmaXJzdE5hbWU6IFwiRW1pbHlcIiwgbGFzdE5hbWU6IFwiRGF2aXNcIiwgcm9sZTogXCJPcGVyYXRvclwiIH0sXG4gICAgICB7IGVtYWlsOiBcInRvbS5iQGV4YW1wbGUuY29tXCIsIGZpcnN0TmFtZTogXCJUb21cIiwgbGFzdE5hbWU6IFwiQnJvd25cIiwgcm9sZTogXCJWaWV3ZXJcIiB9LFxuICAgIF07XG5cbiAgICBzYW1wbGVVc2Vycy5mb3JFYWNoKCh1KSA9PiB7XG4gICAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICAgIGNvbnN0IHVzZXI6IFVzZXIgPSB7XG4gICAgICAgIGlkLFxuICAgICAgICB0ZW5hbnRJZCxcbiAgICAgICAgZW1haWw6IHUuZW1haWwsXG4gICAgICAgIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCxcbiAgICAgICAgZmlyc3ROYW1lOiB1LmZpcnN0TmFtZSxcbiAgICAgICAgbGFzdE5hbWU6IHUubGFzdE5hbWUsXG4gICAgICAgIHJvbGU6IHUucm9sZSxcbiAgICAgICAgc2l0ZUlkczogW3NpdGVJZF0sXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgfTtcbiAgICAgIHRoaXMudXNlcnMuc2V0KGlkLCB1c2VyKTtcbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSBpbml0aWFsIGF1ZGl0IGV2ZW50c1xuICAgIGNvbnN0IGF1ZGl0RGF0YSA9IFtcbiAgICAgIHsgYWN0aW9uOiBcIkNSRUFURVwiLCBlbnRpdHlUeXBlOiBcIlRlbmFudFwiLCBlbnRpdHlJZDogdGVuYW50SWQsIGRldGFpbHM6IFwiSW5pdGlhbCB0ZW5hbnQgc2V0dXBcIiB9LFxuICAgICAgeyBhY3Rpb246IFwiQ1JFQVRFXCIsIGVudGl0eVR5cGU6IFwiU2l0ZVwiLCBlbnRpdHlJZDogc2l0ZUlkLCBkZXRhaWxzOiBcIk1haW4gd2FyZWhvdXNlIGNyZWF0ZWRcIiB9LFxuICAgICAgeyBhY3Rpb246IFwiQ1JFQVRFXCIsIGVudGl0eVR5cGU6IFwiVXNlclwiLCBlbnRpdHlJZDogYWRtaW5JZCwgZGV0YWlsczogXCJBZG1pbiB1c2VyIGNyZWF0ZWRcIiB9LFxuICAgIF07XG5cbiAgICBhdWRpdERhdGEuZm9yRWFjaCgoYSkgPT4ge1xuICAgICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgICBjb25zdCBldmVudDogQXVkaXRFdmVudCA9IHtcbiAgICAgICAgaWQsXG4gICAgICAgIHRlbmFudElkLFxuICAgICAgICB1c2VySWQ6IGFkbWluSWQsXG4gICAgICAgIGFjdGlvbjogYS5hY3Rpb24sXG4gICAgICAgIGVudGl0eVR5cGU6IGEuZW50aXR5VHlwZSxcbiAgICAgICAgZW50aXR5SWQ6IGEuZW50aXR5SWQsXG4gICAgICAgIGRldGFpbHM6IGEuZGV0YWlscyxcbiAgICAgICAgaXBBZGRyZXNzOiBcIjEyNy4wLjAuMVwiLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICB9O1xuICAgICAgdGhpcy5hdWRpdEV2ZW50cy5zZXQoaWQsIGV2ZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFVzZXJzXG4gIGFzeW5jIGdldFVzZXIoaWQ6IHN0cmluZyk6IFByb21pc2U8VXNlciB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB0aGlzLnVzZXJzLmdldChpZCk7XG4gIH1cblxuICBhc3luYyBnZXRVc2VyQnlFbWFpbChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy51c2Vycy52YWx1ZXMoKSkuZmluZCgodSkgPT4gdS5lbWFpbCA9PT0gZW1haWwpO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlVXNlcihpbnNlcnRVc2VyOiBJbnNlcnRVc2VyKTogUHJvbWlzZTxVc2VyPiB7XG4gICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgY29uc3QgdXNlcjogVXNlciA9IHtcbiAgICAgIGlkLFxuICAgICAgdGVuYW50SWQ6IGluc2VydFVzZXIudGVuYW50SWQsXG4gICAgICBlbWFpbDogaW5zZXJ0VXNlci5lbWFpbCxcbiAgICAgIHBhc3N3b3JkOiBpbnNlcnRVc2VyLnBhc3N3b3JkLFxuICAgICAgZmlyc3ROYW1lOiBpbnNlcnRVc2VyLmZpcnN0TmFtZSxcbiAgICAgIGxhc3ROYW1lOiBpbnNlcnRVc2VyLmxhc3ROYW1lLFxuICAgICAgcm9sZTogaW5zZXJ0VXNlci5yb2xlIHx8IFwiVmlld2VyXCIsXG4gICAgICBzaXRlSWRzOiBpbnNlcnRVc2VyLnNpdGVJZHMgfHwgW10sXG4gICAgICBpc0FjdGl2ZTogaW5zZXJ0VXNlci5pc0FjdGl2ZSA/PyB0cnVlLFxuICAgIH07XG4gICAgdGhpcy51c2Vycy5zZXQoaWQsIHVzZXIpO1xuICAgIHJldHVybiB1c2VyO1xuICB9XG5cbiAgYXN5bmMgZ2V0VXNlcnNCeVRlbmFudCh0ZW5hbnRJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnVzZXJzLnZhbHVlcygpKS5maWx0ZXIoKHUpID0+IHUudGVuYW50SWQgPT09IHRlbmFudElkKTtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVVzZXIoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxVc2VyPik6IFByb21pc2U8VXNlciB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IHVzZXIgPSB0aGlzLnVzZXJzLmdldChpZCk7XG4gICAgaWYgKCF1c2VyKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLnVzZXIsIC4uLnVwZGF0ZXMgfTtcbiAgICB0aGlzLnVzZXJzLnNldChpZCwgdXBkYXRlZCk7XG4gICAgcmV0dXJuIHVwZGF0ZWQ7XG4gIH1cblxuICAvLyBUZW5hbnRzXG4gIGFzeW5jIGdldFRlbmFudChpZDogc3RyaW5nKTogUHJvbWlzZTxUZW5hbnQgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdGhpcy50ZW5hbnRzLmdldChpZCk7XG4gIH1cblxuICBhc3luYyBnZXRUZW5hbnRCeVNsdWcoc2x1Zzogc3RyaW5nKTogUHJvbWlzZTxUZW5hbnQgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnRlbmFudHMudmFsdWVzKCkpLmZpbmQoKHQpID0+IHQuc2x1ZyA9PT0gc2x1Zyk7XG4gIH1cblxuICBhc3luYyBjcmVhdGVUZW5hbnQoaW5zZXJ0VGVuYW50OiBJbnNlcnRUZW5hbnQpOiBQcm9taXNlPFRlbmFudD4ge1xuICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgIGNvbnN0IHRlbmFudDogVGVuYW50ID0ge1xuICAgICAgaWQsXG4gICAgICBuYW1lOiBpbnNlcnRUZW5hbnQubmFtZSxcbiAgICAgIHNsdWc6IGluc2VydFRlbmFudC5zbHVnLFxuICAgICAgZW5hYmxlZE1vZHVsZXM6IGluc2VydFRlbmFudC5lbmFibGVkTW9kdWxlcyB8fCBbXSxcbiAgICB9O1xuICAgIHRoaXMudGVuYW50cy5zZXQoaWQsIHRlbmFudCk7XG4gICAgcmV0dXJuIHRlbmFudDtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVRlbmFudChpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPFRlbmFudD4pOiBQcm9taXNlPFRlbmFudCB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IHRlbmFudCA9IHRoaXMudGVuYW50cy5nZXQoaWQpO1xuICAgIGlmICghdGVuYW50KSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLnRlbmFudCwgLi4udXBkYXRlcyB9O1xuICAgIHRoaXMudGVuYW50cy5zZXQoaWQsIHVwZGF0ZWQpO1xuICAgIHJldHVybiB1cGRhdGVkO1xuICB9XG5cbiAgYXN5bmMgZ2V0VGVuYW50c0ZvclVzZXIodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFRlbmFudFdpdGhTaXRlc1tdPiB7XG4gICAgY29uc3QgdXNlciA9IHRoaXMudXNlcnMuZ2V0KHVzZXJJZCk7XG4gICAgaWYgKCF1c2VyKSByZXR1cm4gW107XG4gICAgXG4gICAgY29uc3QgdGVuYW50ID0gdGhpcy50ZW5hbnRzLmdldCh1c2VyLnRlbmFudElkKTtcbiAgICBpZiAoIXRlbmFudCkgcmV0dXJuIFtdO1xuXG4gICAgY29uc3Qgc2l0ZXMgPSBhd2FpdCB0aGlzLmdldFNpdGVzRm9yVXNlcih1c2VySWQpO1xuICAgIHJldHVybiBbeyAuLi50ZW5hbnQsIHNpdGVzIH1dO1xuICB9XG5cbiAgLy8gU2l0ZXNcbiAgYXN5bmMgZ2V0U2l0ZShpZDogc3RyaW5nKTogUHJvbWlzZTxTaXRlIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHRoaXMuc2l0ZXMuZ2V0KGlkKTtcbiAgfVxuXG4gIGFzeW5jIGdldFNpdGVzQnlUZW5hbnQodGVuYW50SWQ6IHN0cmluZyk6IFByb21pc2U8U2l0ZVtdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5zaXRlcy52YWx1ZXMoKSkuZmlsdGVyKChzKSA9PiBzLnRlbmFudElkID09PSB0ZW5hbnRJZCk7XG4gIH1cblxuICBhc3luYyBjcmVhdGVTaXRlKGluc2VydFNpdGU6IEluc2VydFNpdGUpOiBQcm9taXNlPFNpdGU+IHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBzaXRlOiBTaXRlID0ge1xuICAgICAgaWQsXG4gICAgICB0ZW5hbnRJZDogaW5zZXJ0U2l0ZS50ZW5hbnRJZCxcbiAgICAgIG5hbWU6IGluc2VydFNpdGUubmFtZSxcbiAgICAgIGFkZHJlc3M6IGluc2VydFNpdGUuYWRkcmVzcyA/PyBudWxsLFxuICAgIH07XG4gICAgdGhpcy5zaXRlcy5zZXQoaWQsIHNpdGUpO1xuICAgIHJldHVybiBzaXRlO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlU2l0ZShpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPFNpdGU+KTogUHJvbWlzZTxTaXRlIHwgdW5kZWZpbmVkPiB7XG4gICAgY29uc3Qgc2l0ZSA9IHRoaXMuc2l0ZXMuZ2V0KGlkKTtcbiAgICBpZiAoIXNpdGUpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgY29uc3QgdXBkYXRlZCA9IHsgLi4uc2l0ZSwgLi4udXBkYXRlcyB9O1xuICAgIHRoaXMuc2l0ZXMuc2V0KGlkLCB1cGRhdGVkKTtcbiAgICByZXR1cm4gdXBkYXRlZDtcbiAgfVxuXG4gIGFzeW5jIGdldFNpdGVzRm9yVXNlcih1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8U2l0ZVtdPiB7XG4gICAgY29uc3QgdXNlciA9IHRoaXMudXNlcnMuZ2V0KHVzZXJJZCk7XG4gICAgaWYgKCF1c2VyKSByZXR1cm4gW107XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5zaXRlcy52YWx1ZXMoKSkuZmlsdGVyKFxuICAgICAgKHMpID0+IHMudGVuYW50SWQgPT09IHVzZXIudGVuYW50SWQgJiYgdXNlci5zaXRlSWRzLmluY2x1ZGVzKHMuaWQpXG4gICAgKTtcbiAgfVxuXG4gIC8vIERlcGFydG1lbnRzXG4gIGFzeW5jIGdldERlcGFydG1lbnQoaWQ6IHN0cmluZyk6IFByb21pc2U8RGVwYXJ0bWVudCB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB0aGlzLmRlcGFydG1lbnRzLmdldChpZCk7XG4gIH1cblxuICBhc3luYyBnZXREZXBhcnRtZW50c0J5U2l0ZShzaXRlSWQ6IHN0cmluZyk6IFByb21pc2U8RGVwYXJ0bWVudFtdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5kZXBhcnRtZW50cy52YWx1ZXMoKSkuZmlsdGVyKChkKSA9PiBkLnNpdGVJZCA9PT0gc2l0ZUlkKTtcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZURlcGFydG1lbnQoaW5zZXJ0RGVwYXJ0bWVudDogSW5zZXJ0RGVwYXJ0bWVudCk6IFByb21pc2U8RGVwYXJ0bWVudD4ge1xuICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgIGNvbnN0IGRlcGFydG1lbnQ6IERlcGFydG1lbnQgPSB7IC4uLmluc2VydERlcGFydG1lbnQsIGlkIH07XG4gICAgdGhpcy5kZXBhcnRtZW50cy5zZXQoaWQsIGRlcGFydG1lbnQpO1xuICAgIHJldHVybiBkZXBhcnRtZW50O1xuICB9XG5cbiAgLy8gV29ya2NlbGxzXG4gIGFzeW5jIGdldFdvcmtjZWxsKGlkOiBzdHJpbmcpOiBQcm9taXNlPFdvcmtjZWxsIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHRoaXMud29ya2NlbGxzLmdldChpZCk7XG4gIH1cblxuICBhc3luYyBnZXRXb3JrY2VsbHNCeVNpdGUoc2l0ZUlkOiBzdHJpbmcpOiBQcm9taXNlPFdvcmtjZWxsW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLndvcmtjZWxscy52YWx1ZXMoKSkuZmlsdGVyKCh3KSA9PiB3LnNpdGVJZCA9PT0gc2l0ZUlkKTtcbiAgfVxuXG4gIGFzeW5jIGdldFdvcmtjZWxsc0J5RGVwYXJ0bWVudChkZXBhcnRtZW50SWQ6IHN0cmluZyk6IFByb21pc2U8V29ya2NlbGxbXT4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMud29ya2NlbGxzLnZhbHVlcygpKS5maWx0ZXIoKHcpID0+IHcuZGVwYXJ0bWVudElkID09PSBkZXBhcnRtZW50SWQpO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlV29ya2NlbGwoaW5zZXJ0V29ya2NlbGw6IEluc2VydFdvcmtjZWxsKTogUHJvbWlzZTxXb3JrY2VsbD4ge1xuICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgIGNvbnN0IHdvcmtjZWxsOiBXb3JrY2VsbCA9IHtcbiAgICAgIGlkLFxuICAgICAgdGVuYW50SWQ6IGluc2VydFdvcmtjZWxsLnRlbmFudElkLFxuICAgICAgc2l0ZUlkOiBpbnNlcnRXb3JrY2VsbC5zaXRlSWQsXG4gICAgICBkZXBhcnRtZW50SWQ6IGluc2VydFdvcmtjZWxsLmRlcGFydG1lbnRJZCB8fCBudWxsLFxuICAgICAgbmFtZTogaW5zZXJ0V29ya2NlbGwubmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBpbnNlcnRXb3JrY2VsbC5kZXNjcmlwdGlvbiB8fCBudWxsLFxuICAgICAgc3RhdHVzOiBpbnNlcnRXb3JrY2VsbC5zdGF0dXMgfHwgXCJhY3RpdmVcIixcbiAgICB9O1xuICAgIHRoaXMud29ya2NlbGxzLnNldChpZCwgd29ya2NlbGwpO1xuICAgIHJldHVybiB3b3JrY2VsbDtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVdvcmtjZWxsKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8V29ya2NlbGw+KTogUHJvbWlzZTxXb3JrY2VsbCB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IHdvcmtjZWxsID0gdGhpcy53b3JrY2VsbHMuZ2V0KGlkKTtcbiAgICBpZiAoIXdvcmtjZWxsKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLndvcmtjZWxsLCAuLi51cGRhdGVzIH07XG4gICAgdGhpcy53b3JrY2VsbHMuc2V0KGlkLCB1cGRhdGVkKTtcbiAgICByZXR1cm4gdXBkYXRlZDtcbiAgfVxuXG4gIC8vIERldmljZXNcbiAgYXN5bmMgZ2V0RGV2aWNlKGlkOiBzdHJpbmcpOiBQcm9taXNlPERldmljZSB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB0aGlzLmRldmljZXMuZ2V0KGlkKTtcbiAgfVxuXG4gIGFzeW5jIGdldERldmljZXNCeVdvcmtjZWxsKHdvcmtjZWxsSWQ6IHN0cmluZyk6IFByb21pc2U8RGV2aWNlW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmRldmljZXMudmFsdWVzKCkpLmZpbHRlcigoZCkgPT4gZC53b3JrY2VsbElkID09PSB3b3JrY2VsbElkKTtcbiAgfVxuXG4gIGFzeW5jIGdldERldmljZXNCeVNpdGUoc2l0ZUlkOiBzdHJpbmcpOiBQcm9taXNlPERldmljZVtdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5kZXZpY2VzLnZhbHVlcygpKS5maWx0ZXIoKGQpID0+IGQuc2l0ZUlkID09PSBzaXRlSWQpO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlRGV2aWNlKGluc2VydERldmljZTogSW5zZXJ0RGV2aWNlKTogUHJvbWlzZTxEZXZpY2U+IHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBkZXZpY2U6IERldmljZSA9IHtcbiAgICAgIGlkLFxuICAgICAgdGVuYW50SWQ6IGluc2VydERldmljZS50ZW5hbnRJZCxcbiAgICAgIHNpdGVJZDogaW5zZXJ0RGV2aWNlLnNpdGVJZCxcbiAgICAgIHdvcmtjZWxsSWQ6IGluc2VydERldmljZS53b3JrY2VsbElkIHx8IG51bGwsXG4gICAgICBuYW1lOiBpbnNlcnREZXZpY2UubmFtZSxcbiAgICAgIHR5cGU6IGluc2VydERldmljZS50eXBlLFxuICAgICAgc2VyaWFsTnVtYmVyOiBpbnNlcnREZXZpY2Uuc2VyaWFsTnVtYmVyIHx8IG51bGwsXG4gICAgICBzdGF0dXM6IGluc2VydERldmljZS5zdGF0dXMgfHwgXCJvbmxpbmVcIixcbiAgICB9O1xuICAgIHRoaXMuZGV2aWNlcy5zZXQoaWQsIGRldmljZSk7XG4gICAgcmV0dXJuIGRldmljZTtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZURldmljZShpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPERldmljZT4pOiBQcm9taXNlPERldmljZSB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IGRldmljZSA9IHRoaXMuZGV2aWNlcy5nZXQoaWQpO1xuICAgIGlmICghZGV2aWNlKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLmRldmljZSwgLi4udXBkYXRlcyB9O1xuICAgIHRoaXMuZGV2aWNlcy5zZXQoaWQsIHVwZGF0ZWQpO1xuICAgIHJldHVybiB1cGRhdGVkO1xuICB9XG5cbiAgLy8gQmFkZ2VzXG4gIGFzeW5jIGdldEJhZGdlKGlkOiBzdHJpbmcpOiBQcm9taXNlPEJhZGdlIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHRoaXMuYmFkZ2VzLmdldChpZCk7XG4gIH1cblxuICBhc3luYyBnZXRCYWRnZUJ5TnVtYmVyKGJhZGdlTnVtYmVyOiBzdHJpbmcsIHRlbmFudElkOiBzdHJpbmcpOiBQcm9taXNlPEJhZGdlIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5iYWRnZXMudmFsdWVzKCkpLmZpbmQoXG4gICAgICAoYikgPT4gYi5iYWRnZU51bWJlciA9PT0gYmFkZ2VOdW1iZXIgJiYgYi50ZW5hbnRJZCA9PT0gdGVuYW50SWRcbiAgICApO1xuICB9XG5cbiAgYXN5bmMgZ2V0QmFkZ2VzQnlVc2VyKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxCYWRnZVtdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5iYWRnZXMudmFsdWVzKCkpLmZpbHRlcigoYikgPT4gYi51c2VySWQgPT09IHVzZXJJZCk7XG4gIH1cblxuICBhc3luYyBjcmVhdGVCYWRnZShpbnNlcnRCYWRnZTogSW5zZXJ0QmFkZ2UpOiBQcm9taXNlPEJhZGdlPiB7XG4gICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgY29uc3QgYmFkZ2U6IEJhZGdlID0ge1xuICAgICAgaWQsXG4gICAgICB0ZW5hbnRJZDogaW5zZXJ0QmFkZ2UudGVuYW50SWQsXG4gICAgICB1c2VySWQ6IGluc2VydEJhZGdlLnVzZXJJZCxcbiAgICAgIGJhZGdlTnVtYmVyOiBpbnNlcnRCYWRnZS5iYWRnZU51bWJlcixcbiAgICAgIGlzQWN0aXZlOiBpbnNlcnRCYWRnZS5pc0FjdGl2ZSA/PyB0cnVlLFxuICAgIH07XG4gICAgdGhpcy5iYWRnZXMuc2V0KGlkLCBiYWRnZSk7XG4gICAgcmV0dXJuIGJhZGdlO1xuICB9XG5cbiAgLy8gQXVkaXQgRXZlbnRzXG4gIGFzeW5jIGNyZWF0ZUF1ZGl0RXZlbnQoaW5zZXJ0RXZlbnQ6IEluc2VydEF1ZGl0RXZlbnQpOiBQcm9taXNlPEF1ZGl0RXZlbnQ+IHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBldmVudDogQXVkaXRFdmVudCA9IHtcbiAgICAgIGlkLFxuICAgICAgdGVuYW50SWQ6IGluc2VydEV2ZW50LnRlbmFudElkLFxuICAgICAgdXNlcklkOiBpbnNlcnRFdmVudC51c2VySWQgPz8gbnVsbCxcbiAgICAgIGFjdGlvbjogaW5zZXJ0RXZlbnQuYWN0aW9uLFxuICAgICAgZW50aXR5VHlwZTogaW5zZXJ0RXZlbnQuZW50aXR5VHlwZSxcbiAgICAgIGVudGl0eUlkOiBpbnNlcnRFdmVudC5lbnRpdHlJZCA/PyBudWxsLFxuICAgICAgZGV0YWlsczogaW5zZXJ0RXZlbnQuZGV0YWlscyA/PyBudWxsLFxuICAgICAgaXBBZGRyZXNzOiBpbnNlcnRFdmVudC5pcEFkZHJlc3MgPz8gbnVsbCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICB9O1xuICAgIHRoaXMuYXVkaXRFdmVudHMuc2V0KGlkLCBldmVudCk7XG4gICAgcmV0dXJuIGV2ZW50O1xuICB9XG5cbiAgYXN5bmMgZ2V0QXVkaXRFdmVudHModGVuYW50SWQ6IHN0cmluZywgbGltaXQgPSA1MCk6IFByb21pc2U8QXVkaXRFdmVudFtdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5hdWRpdEV2ZW50cy52YWx1ZXMoKSlcbiAgICAgIC5maWx0ZXIoKGUpID0+IGUudGVuYW50SWQgPT09IHRlbmFudElkKVxuICAgICAgLnNvcnQoKGEsIGIpID0+IGIudGltZXN0YW1wLmdldFRpbWUoKSAtIGEudGltZXN0YW1wLmdldFRpbWUoKSlcbiAgICAgIC5zbGljZSgwLCBsaW1pdCk7XG4gIH1cblxuICBhc3luYyBnZXRBdWRpdEV2ZW50c0J5RW50aXR5KGVudGl0eVR5cGU6IHN0cmluZywgZW50aXR5SWQ6IHN0cmluZyk6IFByb21pc2U8QXVkaXRFdmVudFtdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5hdWRpdEV2ZW50cy52YWx1ZXMoKSlcbiAgICAgIC5maWx0ZXIoKGUpID0+IGUuZW50aXR5VHlwZSA9PT0gZW50aXR5VHlwZSAmJiBlLmVudGl0eUlkID09PSBlbnRpdHlJZClcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLnRpbWVzdGFtcC5nZXRUaW1lKCkgLSBhLnRpbWVzdGFtcC5nZXRUaW1lKCkpO1xuICB9XG5cbiAgLy8gSW52ZW50b3J5IEl0ZW1zXG4gIGFzeW5jIGdldEl0ZW1zQnlUZW5hbnQodGVuYW50SWQ6IHN0cmluZyk6IFByb21pc2U8SXRlbVtdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5pdGVtcy52YWx1ZXMoKSkuZmlsdGVyKChpKSA9PiBpLnRlbmFudElkID09PSB0ZW5hbnRJZCk7XG4gIH1cblxuICBhc3luYyBnZXRJdGVtQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxJdGVtIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbXMuZ2V0KGlkKTtcbiAgfVxuXG4gIGFzeW5jIGdldEl0ZW1CeVNrdSh0ZW5hbnRJZDogc3RyaW5nLCBza3U6IHN0cmluZyk6IFByb21pc2U8SXRlbSB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuaXRlbXMudmFsdWVzKCkpLmZpbmQoXG4gICAgICAoaSkgPT4gaS50ZW5hbnRJZCA9PT0gdGVuYW50SWQgJiYgaS5za3UudG9Mb3dlckNhc2UoKSA9PT0gc2t1LnRvTG93ZXJDYXNlKCksXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUl0ZW0oaXRlbTogT21pdDxJdGVtLCBcImlkXCI+KTogUHJvbWlzZTxJdGVtPiB7XG4gICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgY29uc3QgY3JlYXRlZDogSXRlbSA9IHsgLi4uaXRlbSwgaWQgfTtcbiAgICB0aGlzLml0ZW1zLnNldChpZCwgY3JlYXRlZCk7XG4gICAgcmV0dXJuIGNyZWF0ZWQ7XG4gIH1cblxuICBhc3luYyB1cGRhdGVJdGVtKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8SXRlbT4pOiBQcm9taXNlPEl0ZW0gfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtcy5nZXQoaWQpO1xuICAgIGlmICghaXRlbSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBjb25zdCB1cGRhdGVkID0geyAuLi5pdGVtLCAuLi51cGRhdGVzIH07XG4gICAgdGhpcy5pdGVtcy5zZXQoaWQsIHVwZGF0ZWQpO1xuICAgIHJldHVybiB1cGRhdGVkO1xuICB9XG5cbiAgLy8gSW52ZW50b3J5IExvY2F0aW9uc1xuICBhc3luYyBnZXRMb2NhdGlvbnNCeVNpdGUoc2l0ZUlkOiBzdHJpbmcpOiBQcm9taXNlPExvY2F0aW9uW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmxvY2F0aW9ucy52YWx1ZXMoKSkuZmlsdGVyKChsKSA9PiBsLnNpdGVJZCA9PT0gc2l0ZUlkKTtcbiAgfVxuXG4gIGFzeW5jIGdldExvY2F0aW9uQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxMb2NhdGlvbiB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB0aGlzLmxvY2F0aW9ucy5nZXQoaWQpO1xuICB9XG5cbiAgYXN5bmMgZ2V0TG9jYXRpb25CeUxhYmVsKHNpdGVJZDogc3RyaW5nLCBsYWJlbDogc3RyaW5nKTogUHJvbWlzZTxMb2NhdGlvbiB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMubG9jYXRpb25zLnZhbHVlcygpKS5maW5kKFxuICAgICAgKGwpID0+IGwuc2l0ZUlkID09PSBzaXRlSWQgJiYgbC5sYWJlbC50b0xvd2VyQ2FzZSgpID09PSBsYWJlbC50b0xvd2VyQ2FzZSgpLFxuICAgICk7XG4gIH1cblxuICBhc3luYyBjcmVhdGVMb2NhdGlvbihsb2NhdGlvbjogT21pdDxMb2NhdGlvbiwgXCJpZFwiPik6IFByb21pc2U8TG9jYXRpb24+IHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBjcmVhdGVkOiBMb2NhdGlvbiA9IHsgLi4ubG9jYXRpb24sIGlkIH07XG4gICAgdGhpcy5sb2NhdGlvbnMuc2V0KGlkLCBjcmVhdGVkKTtcbiAgICByZXR1cm4gY3JlYXRlZDtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUxvY2F0aW9uKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8TG9jYXRpb24+KTogUHJvbWlzZTxMb2NhdGlvbiB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5sb2NhdGlvbnMuZ2V0KGlkKTtcbiAgICBpZiAoIWxvY2F0aW9uKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLmxvY2F0aW9uLCAuLi51cGRhdGVzIH07XG4gICAgdGhpcy5sb2NhdGlvbnMuc2V0KGlkLCB1cGRhdGVkKTtcbiAgICByZXR1cm4gdXBkYXRlZDtcbiAgfVxuXG4gIC8vIEludmVudG9yeSBSZWFzb24gQ29kZXNcbiAgYXN5bmMgZ2V0UmVhc29uQ29kZXNCeVRlbmFudCh0ZW5hbnRJZDogc3RyaW5nKTogUHJvbWlzZTxSZWFzb25Db2RlW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnJlYXNvbkNvZGVzLnZhbHVlcygpKS5maWx0ZXIoKHIpID0+IHIudGVuYW50SWQgPT09IHRlbmFudElkKTtcbiAgfVxuXG4gIGFzeW5jIGdldFJlYXNvbkNvZGVCeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPFJlYXNvbkNvZGUgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZWFzb25Db2Rlcy5nZXQoaWQpO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlUmVhc29uQ29kZShyZWFzb25Db2RlOiBPbWl0PFJlYXNvbkNvZGUsIFwiaWRcIj4pOiBQcm9taXNlPFJlYXNvbkNvZGU+IHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBjcmVhdGVkOiBSZWFzb25Db2RlID0geyAuLi5yZWFzb25Db2RlLCBpZCB9O1xuICAgIHRoaXMucmVhc29uQ29kZXMuc2V0KGlkLCBjcmVhdGVkKTtcbiAgICByZXR1cm4gY3JlYXRlZDtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVJlYXNvbkNvZGUoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxSZWFzb25Db2RlPik6IFByb21pc2U8UmVhc29uQ29kZSB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IHJlYXNvbkNvZGUgPSB0aGlzLnJlYXNvbkNvZGVzLmdldChpZCk7XG4gICAgaWYgKCFyZWFzb25Db2RlKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLnJlYXNvbkNvZGUsIC4uLnVwZGF0ZXMgfTtcbiAgICB0aGlzLnJlYXNvbkNvZGVzLnNldChpZCwgdXBkYXRlZCk7XG4gICAgcmV0dXJuIHVwZGF0ZWQ7XG4gIH1cblxuICAvLyBJbnZlbnRvcnkgRXZlbnRzICsgQmFsYW5jZXNcbiAgYXN5bmMgY3JlYXRlSW52ZW50b3J5RXZlbnQoXG4gICAgZXZlbnQ6IE9taXQ8SW52ZW50b3J5RXZlbnQsIFwiaWRcIiB8IFwiY3JlYXRlZEF0XCI+LFxuICApOiBQcm9taXNlPEludmVudG9yeUV2ZW50PiB7XG4gICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgY29uc3QgY3JlYXRlZDogSW52ZW50b3J5RXZlbnQgPSB7IC4uLmV2ZW50LCBpZCwgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpIH07XG4gICAgdGhpcy5pbnZlbnRvcnlFdmVudHMuc2V0KGlkLCBjcmVhdGVkKTtcbiAgICByZXR1cm4gY3JlYXRlZDtcbiAgfVxuXG4gIGFzeW5jIGdldEludmVudG9yeUV2ZW50c0J5VGVuYW50KHRlbmFudElkOiBzdHJpbmcpOiBQcm9taXNlPEludmVudG9yeUV2ZW50W10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmludmVudG9yeUV2ZW50cy52YWx1ZXMoKSlcbiAgICAgIC5maWx0ZXIoKGUpID0+IGUudGVuYW50SWQgPT09IHRlbmFudElkKVxuICAgICAgLnNvcnQoKGEsIGIpID0+IGIuY3JlYXRlZEF0LmdldFRpbWUoKSAtIGEuY3JlYXRlZEF0LmdldFRpbWUoKSk7XG4gIH1cblxuICBhc3luYyBnZXRJbnZlbnRvcnlCYWxhbmNlKFxuICAgIHRlbmFudElkOiBzdHJpbmcsXG4gICAgc2l0ZUlkOiBzdHJpbmcsXG4gICAgaXRlbUlkOiBzdHJpbmcsXG4gICAgbG9jYXRpb25JZDogc3RyaW5nLFxuICApOiBQcm9taXNlPEludmVudG9yeUJhbGFuY2UgfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBrZXkgPSBgJHt0ZW5hbnRJZH18JHtzaXRlSWR9fCR7aXRlbUlkfXwke2xvY2F0aW9uSWR9YDtcbiAgICByZXR1cm4gdGhpcy5pbnZlbnRvcnlCYWxhbmNlcy5nZXQoa2V5KTtcbiAgfVxuXG4gIGFzeW5jIHVwc2VydEludmVudG9yeUJhbGFuY2UoXG4gICAgYmFsYW5jZTogT21pdDxJbnZlbnRvcnlCYWxhbmNlLCBcImlkXCI+LFxuICApOiBQcm9taXNlPEludmVudG9yeUJhbGFuY2U+IHtcbiAgICBjb25zdCBrZXkgPSBgJHtiYWxhbmNlLnRlbmFudElkfXwke2JhbGFuY2Uuc2l0ZUlkfXwke2JhbGFuY2UuaXRlbUlkfXwke2JhbGFuY2UubG9jYXRpb25JZH1gO1xuICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5pbnZlbnRvcnlCYWxhbmNlcy5nZXQoa2V5KTtcbiAgICBjb25zdCBjcmVhdGVkOiBJbnZlbnRvcnlCYWxhbmNlID0ge1xuICAgICAgaWQ6IGV4aXN0aW5nPy5pZCB8fCByYW5kb21VVUlEKCksXG4gICAgICAuLi5iYWxhbmNlLFxuICAgIH07XG4gICAgdGhpcy5pbnZlbnRvcnlCYWxhbmNlcy5zZXQoa2V5LCBjcmVhdGVkKTtcbiAgICByZXR1cm4gY3JlYXRlZDtcbiAgfVxuXG4gIGFzeW5jIGdldEludmVudG9yeUJhbGFuY2VzQnlTaXRlKHNpdGVJZDogc3RyaW5nKTogUHJvbWlzZTxJbnZlbnRvcnlCYWxhbmNlW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmludmVudG9yeUJhbGFuY2VzLnZhbHVlcygpKS5maWx0ZXIoKGIpID0+IGIuc2l0ZUlkID09PSBzaXRlSWQpO1xuICB9XG5cbiAgLy8gU2Vzc2lvbiBoZWxwZXJzXG4gIGFzeW5jIGdldFNlc3Npb25Vc2VyKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxTZXNzaW9uVXNlciB8IG51bGw+IHtcbiAgICBjb25zdCB1c2VyID0gdGhpcy51c2Vycy5nZXQodXNlcklkKTtcbiAgICBpZiAoIXVzZXIpIHJldHVybiBudWxsO1xuXG4gICAgY29uc3QgdGVuYW50ID0gdGhpcy50ZW5hbnRzLmdldCh1c2VyLnRlbmFudElkKTtcbiAgICBpZiAoIXRlbmFudCkgcmV0dXJuIG51bGw7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgIGZpcnN0TmFtZTogdXNlci5maXJzdE5hbWUsXG4gICAgICBsYXN0TmFtZTogdXNlci5sYXN0TmFtZSxcbiAgICAgIHJvbGU6IHVzZXIucm9sZSBhcyBTZXNzaW9uVXNlcltcInJvbGVcIl0sXG4gICAgICB0ZW5hbnRJZDogdXNlci50ZW5hbnRJZCxcbiAgICAgIHRlbmFudE5hbWU6IHRlbmFudC5uYW1lLFxuICAgICAgc2l0ZUlkczogdXNlci5zaXRlSWRzLFxuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHN0b3JhZ2UgPSBuZXcgTWVtU3RvcmFnZSgpO1xuIl0sIm5hbWVzIjpbInJhbmRvbVVVSUQiLCJiY3J5cHQiLCJNZW1TdG9yYWdlIiwiY29uc3RydWN0b3IiLCJ1c2VycyIsIk1hcCIsInRlbmFudHMiLCJzaXRlcyIsImRlcGFydG1lbnRzIiwid29ya2NlbGxzIiwiZGV2aWNlcyIsImJhZGdlcyIsImF1ZGl0RXZlbnRzIiwiaXRlbXMiLCJsb2NhdGlvbnMiLCJyZWFzb25Db2RlcyIsImludmVudG9yeUV2ZW50cyIsImludmVudG9yeUJhbGFuY2VzIiwic2VlZERhdGEiLCJ0ZW5hbnRJZCIsInRlbmFudCIsImlkIiwibmFtZSIsInNsdWciLCJlbmFibGVkTW9kdWxlcyIsInNldCIsInNpdGVJZCIsInNpdGUiLCJhZGRyZXNzIiwic2l0ZTJJZCIsInNpdGUyIiwiZGVwdE1hcCIsImZvckVhY2giLCJkIiwiZGVwdCIsIndvcmtjZWxsc0RhdGEiLCJkZXNjcmlwdGlvbiIsIndvcmtjZWxsTWFwIiwidyIsIndvcmtjZWxsIiwiZGVwYXJ0bWVudElkIiwic3RhdHVzIiwiZGV2aWNlc0RhdGEiLCJ0eXBlIiwiZGV2aWNlIiwid29ya2NlbGxJZCIsInNlcmlhbE51bWJlciIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsInRvVXBwZXJDYXNlIiwiaXRlbXNEYXRhIiwic2t1IiwiY2F0ZWdvcnkiLCJiYXNlVW9tIiwiYWxsb3dlZFVvbXMiLCJ1b20iLCJ0b0Jhc2UiLCJtaW5RdHlCYXNlIiwibWF4UXR5QmFzZSIsInJlb3JkZXJQb2ludEJhc2UiLCJsZWFkVGltZURheXMiLCJpdGVtIiwibG9jYXRpb25zRGF0YSIsInpvbmUiLCJiaW4iLCJsYWJlbCIsImxvY2F0aW9uIiwicmVhc29uQ29kZXNEYXRhIiwiY29kZSIsInJlYXNvbiIsImhhc2hlZFBhc3N3b3JkIiwiaGFzaFN5bmMiLCJhZG1pbklkIiwiYWRtaW5Vc2VyIiwiZW1haWwiLCJwYXNzd29yZCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwicm9sZSIsInNpdGVJZHMiLCJpc0FjdGl2ZSIsInNhbXBsZVVzZXJzIiwidSIsInVzZXIiLCJhdWRpdERhdGEiLCJhY3Rpb24iLCJlbnRpdHlUeXBlIiwiZW50aXR5SWQiLCJkZXRhaWxzIiwiYSIsImV2ZW50IiwidXNlcklkIiwiaXBBZGRyZXNzIiwidGltZXN0YW1wIiwiRGF0ZSIsImdldFVzZXIiLCJnZXQiLCJnZXRVc2VyQnlFbWFpbCIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsImZpbmQiLCJjcmVhdGVVc2VyIiwiaW5zZXJ0VXNlciIsImdldFVzZXJzQnlUZW5hbnQiLCJmaWx0ZXIiLCJ1cGRhdGVVc2VyIiwidXBkYXRlcyIsInVuZGVmaW5lZCIsInVwZGF0ZWQiLCJnZXRUZW5hbnQiLCJnZXRUZW5hbnRCeVNsdWciLCJ0IiwiY3JlYXRlVGVuYW50IiwiaW5zZXJ0VGVuYW50IiwidXBkYXRlVGVuYW50IiwiZ2V0VGVuYW50c0ZvclVzZXIiLCJnZXRTaXRlc0ZvclVzZXIiLCJnZXRTaXRlIiwiZ2V0U2l0ZXNCeVRlbmFudCIsInMiLCJjcmVhdGVTaXRlIiwiaW5zZXJ0U2l0ZSIsInVwZGF0ZVNpdGUiLCJpbmNsdWRlcyIsImdldERlcGFydG1lbnQiLCJnZXREZXBhcnRtZW50c0J5U2l0ZSIsImNyZWF0ZURlcGFydG1lbnQiLCJpbnNlcnREZXBhcnRtZW50IiwiZGVwYXJ0bWVudCIsImdldFdvcmtjZWxsIiwiZ2V0V29ya2NlbGxzQnlTaXRlIiwiZ2V0V29ya2NlbGxzQnlEZXBhcnRtZW50IiwiY3JlYXRlV29ya2NlbGwiLCJpbnNlcnRXb3JrY2VsbCIsInVwZGF0ZVdvcmtjZWxsIiwiZ2V0RGV2aWNlIiwiZ2V0RGV2aWNlc0J5V29ya2NlbGwiLCJnZXREZXZpY2VzQnlTaXRlIiwiY3JlYXRlRGV2aWNlIiwiaW5zZXJ0RGV2aWNlIiwidXBkYXRlRGV2aWNlIiwiZ2V0QmFkZ2UiLCJnZXRCYWRnZUJ5TnVtYmVyIiwiYmFkZ2VOdW1iZXIiLCJiIiwiZ2V0QmFkZ2VzQnlVc2VyIiwiY3JlYXRlQmFkZ2UiLCJpbnNlcnRCYWRnZSIsImJhZGdlIiwiY3JlYXRlQXVkaXRFdmVudCIsImluc2VydEV2ZW50IiwiZ2V0QXVkaXRFdmVudHMiLCJsaW1pdCIsImUiLCJzb3J0IiwiZ2V0VGltZSIsInNsaWNlIiwiZ2V0QXVkaXRFdmVudHNCeUVudGl0eSIsImdldEl0ZW1zQnlUZW5hbnQiLCJpIiwiZ2V0SXRlbUJ5SWQiLCJnZXRJdGVtQnlTa3UiLCJ0b0xvd2VyQ2FzZSIsImNyZWF0ZUl0ZW0iLCJjcmVhdGVkIiwidXBkYXRlSXRlbSIsImdldExvY2F0aW9uc0J5U2l0ZSIsImwiLCJnZXRMb2NhdGlvbkJ5SWQiLCJnZXRMb2NhdGlvbkJ5TGFiZWwiLCJjcmVhdGVMb2NhdGlvbiIsInVwZGF0ZUxvY2F0aW9uIiwiZ2V0UmVhc29uQ29kZXNCeVRlbmFudCIsInIiLCJnZXRSZWFzb25Db2RlQnlJZCIsImNyZWF0ZVJlYXNvbkNvZGUiLCJyZWFzb25Db2RlIiwidXBkYXRlUmVhc29uQ29kZSIsImNyZWF0ZUludmVudG9yeUV2ZW50IiwiY3JlYXRlZEF0IiwiZ2V0SW52ZW50b3J5RXZlbnRzQnlUZW5hbnQiLCJnZXRJbnZlbnRvcnlCYWxhbmNlIiwiaXRlbUlkIiwibG9jYXRpb25JZCIsImtleSIsInVwc2VydEludmVudG9yeUJhbGFuY2UiLCJiYWxhbmNlIiwiZXhpc3RpbmciLCJnZXRJbnZlbnRvcnlCYWxhbmNlc0J5U2l0ZSIsImdldFNlc3Npb25Vc2VyIiwidGVuYW50TmFtZSIsInN0b3JhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./server/storage.ts\n");

/***/ }),

/***/ "(rsc)/./shared/validation.ts":
/*!******************************!*\
  !*** ./shared/validation.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loginSchema: () => (/* binding */ loginSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n\n// Login schema for form validation (shared between client and server)\nconst loginSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    email: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().email(\"Invalid email address\"),\n    password: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().min(1, \"Password is required\")\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zaGFyZWQvdmFsaWRhdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUF3QjtBQUV4QixzRUFBc0U7QUFDL0QsTUFBTUMsY0FBY0Qsa0NBQUNBLENBQUNFLE1BQU0sQ0FBQztJQUNsQ0MsT0FBT0gsa0NBQUNBLENBQUNJLE1BQU0sR0FBR0QsS0FBSyxDQUFDO0lBQ3hCRSxVQUFVTCxrQ0FBQ0EsQ0FBQ0ksTUFBTSxHQUFHRSxHQUFHLENBQUMsR0FBRztBQUM5QixHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVzdC1leHByZXNzLy4vc2hhcmVkL3ZhbGlkYXRpb24udHM/MzEzNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuXG4vLyBMb2dpbiBzY2hlbWEgZm9yIGZvcm0gdmFsaWRhdGlvbiAoc2hhcmVkIGJldHdlZW4gY2xpZW50IGFuZCBzZXJ2ZXIpXG5leHBvcnQgY29uc3QgbG9naW5TY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGVtYWlsOiB6LnN0cmluZygpLmVtYWlsKFwiSW52YWxpZCBlbWFpbCBhZGRyZXNzXCIpLFxuICBwYXNzd29yZDogei5zdHJpbmcoKS5taW4oMSwgXCJQYXNzd29yZCBpcyByZXF1aXJlZFwiKSxcbn0pO1xuXG5leHBvcnQgdHlwZSBMb2dpbkNyZWRlbnRpYWxzID0gei5pbmZlcjx0eXBlb2YgbG9naW5TY2hlbWE+O1xuIl0sIm5hbWVzIjpbInoiLCJsb2dpblNjaGVtYSIsIm9iamVjdCIsImVtYWlsIiwic3RyaW5nIiwicGFzc3dvcmQiLCJtaW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./shared/validation.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.ts&appDir=C%3A%5CUsers%5CSomli%5COneDrive%5CDesktop%5CMy%20Apps%5CWarehouse%20Builder%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CSomli%5COneDrive%5CDesktop%5CMy%20Apps%5CWarehouse%20Builder&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();