"use strict";(()=>{var e={};e.id=722,e.ids=[722],e.modules={7096:e=>{e.exports=require("bcrypt")},2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4770:e=>{e.exports=require("crypto")},1750:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>y,requestAsyncStorage:()=>z,routeModule:()=>c,serverHooks:()=>I,staticGenerationAsyncStorage:()=>g});var n={};r.r(n),r.d(n,{PATCH:()=>m});var o=r(9303),i=r(8716),s=r(670),a=r(7070),p=r(7410),u=r(7630),d=r(7773),l=r(3887);async function m(e,{params:t}){try{let r=await (0,d.a8)();if(!r)return a.NextResponse.json({error:"Unauthorized"},{status:401});if(!["Admin","Supervisor","Inventory"].includes(r.user.role))return a.NextResponse.json({error:"Forbidden"},{status:403});let n=await u.t.getItemById(t.id);if(!n||n.tenantId!==r.user.tenantId)return a.NextResponse.json({error:"Item not found"},{status:404});let o=l.FH.parse(await e.json());if(o.sku){let e=await u.t.getItemBySku(r.user.tenantId,o.sku);if(e&&e.id!==n.id)return a.NextResponse.json({error:"SKU already exists"},{status:409})}let i=await u.t.updateItem(n.id,o);return a.NextResponse.json(i)}catch(e){if(e instanceof p.z.ZodError)return a.NextResponse.json({error:"Invalid request",details:e.errors},{status:400});return a.NextResponse.json({error:"Internal server error"},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/inventory/items/[id]/route",pathname:"/api/inventory/items/[id]",filename:"route",bundlePath:"app/api/inventory/items/[id]/route"},resolvedPagePath:"C:\\Users\\Somli\\OneDrive\\Desktop\\My Apps\\Warehouse Builder\\app\\api\\inventory\\items\\[id]\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:z,staticGenerationAsyncStorage:g,serverHooks:I}=c,x="/api/inventory/items/[id]/route";function y(){return(0,s.patchFetch)({serverHooks:I,staticGenerationAsyncStorage:g})}},3887:(e,t,r)=>{r.d(t,{BQ:()=>m,FH:()=>a,Le:()=>u,YJ:()=>p,hJ:()=>s,og:()=>d,yb:()=>l});var n=r(7410);let o=["EA","FT","YD","ROLL"],i=n.z.object({uom:n.z.enum(o),toBase:n.z.number().positive()}),s=n.z.object({sku:n.z.string().min(1),name:n.z.string().min(1),description:n.z.string().optional(),category:n.z.enum(["PRODUCTION","PACKAGING","FACILITY","CHEMICAL_MRO"]),baseUom:n.z.enum(o),allowedUoms:n.z.array(i).min(1),minQtyBase:n.z.number().optional(),maxQtyBase:n.z.number().optional(),reorderPointBase:n.z.number().optional(),leadTimeDays:n.z.number().int().optional()}),a=s.partial(),p=n.z.object({siteId:n.z.string().min(1),zone:n.z.string().optional(),bin:n.z.string().optional(),label:n.z.string().min(1),type:n.z.enum(["RECEIVING","STOCK","WIP","QC_HOLD","SHIPPING"]).optional()}),u=p.partial(),d=n.z.object({type:n.z.enum(["SCRAP","ADJUST","HOLD"]),code:n.z.string().min(1),description:n.z.string().optional()}),l=d.partial(),m=n.z.object({siteId:n.z.string().min(1),eventType:n.z.enum(["RECEIVE","MOVE","ISSUE_TO_WORKCELL","RETURN","SCRAP","HOLD","RELEASE","COUNT","ADJUST"]),itemId:n.z.string().min(1),qtyEntered:n.z.number().positive(),uomEntered:n.z.enum(o),fromLocationId:n.z.string().optional(),toLocationId:n.z.string().optional(),workcellId:n.z.string().optional(),referenceId:n.z.string().optional(),reasonCodeId:n.z.string().optional(),notes:n.z.string().optional(),deviceId:n.z.string().optional()})}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[276,564,410,773],()=>r(1750));module.exports=n})();