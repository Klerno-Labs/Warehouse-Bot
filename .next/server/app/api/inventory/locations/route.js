"use strict";(()=>{var e={};e.id=445,e.ids=[445],e.modules={7096:e=>{e.exports=require("bcrypt")},2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4770:e=>{e.exports=require("crypto")},9439:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>x,patchFetch:()=>b,requestAsyncStorage:()=>g,routeModule:()=>z,serverHooks:()=>y,staticGenerationAsyncStorage:()=>I});var r={};n.r(r),n.d(r,{GET:()=>c,POST:()=>m});var o=n(9303),s=n(8716),i=n(670),a=n(7070),u=n(7410),p=n(7630),l=n(7773),d=n(3887);async function c(e){let t=await (0,l.a8)();if(!t)return a.NextResponse.json({error:"Unauthorized"},{status:401});let{searchParams:n}=new URL(e.url),r=n.get("siteId")||t.user.siteIds[0],o=await p.t.getLocationsBySite(r);return a.NextResponse.json(o.filter(e=>e.tenantId===t.user.tenantId))}async function m(e){try{let t=await (0,l.a8)();if(!t)return a.NextResponse.json({error:"Unauthorized"},{status:401});if(!["Admin","Supervisor","Inventory"].includes(t.user.role))return a.NextResponse.json({error:"Forbidden"},{status:403});let n=d.YJ.parse(await e.json());if(!t.user.siteIds.includes(n.siteId))return a.NextResponse.json({error:"Site access denied"},{status:403});if(await p.t.getLocationByLabel(n.siteId,n.label))return a.NextResponse.json({error:"Location label already exists"},{status:409});let r=await p.t.createLocation({tenantId:t.user.tenantId,...n,zone:n.zone||null,bin:n.bin||null,type:n.type||null});return a.NextResponse.json(r,{status:201})}catch(e){if(e instanceof u.z.ZodError)return a.NextResponse.json({error:"Invalid request",details:e.errors},{status:400});return a.NextResponse.json({error:"Internal server error"},{status:500})}}let z=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/inventory/locations/route",pathname:"/api/inventory/locations",filename:"route",bundlePath:"app/api/inventory/locations/route"},resolvedPagePath:"C:\\Users\\Somli\\OneDrive\\Desktop\\My Apps\\Warehouse Builder\\app\\api\\inventory\\locations\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:g,staticGenerationAsyncStorage:I,serverHooks:y}=z,x="/api/inventory/locations/route";function b(){return(0,i.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:I})}},3887:(e,t,n)=>{n.d(t,{BQ:()=>c,FH:()=>a,Le:()=>p,YJ:()=>u,hJ:()=>i,og:()=>l,yb:()=>d});var r=n(7410);let o=["EA","FT","YD","ROLL"],s=r.z.object({uom:r.z.enum(o),toBase:r.z.number().positive()}),i=r.z.object({sku:r.z.string().min(1),name:r.z.string().min(1),description:r.z.string().optional(),category:r.z.enum(["PRODUCTION","PACKAGING","FACILITY","CHEMICAL_MRO"]),baseUom:r.z.enum(o),allowedUoms:r.z.array(s).min(1),minQtyBase:r.z.number().optional(),maxQtyBase:r.z.number().optional(),reorderPointBase:r.z.number().optional(),leadTimeDays:r.z.number().int().optional()}),a=i.partial(),u=r.z.object({siteId:r.z.string().min(1),zone:r.z.string().optional(),bin:r.z.string().optional(),label:r.z.string().min(1),type:r.z.enum(["RECEIVING","STOCK","WIP","QC_HOLD","SHIPPING"]).optional()}),p=u.partial(),l=r.z.object({type:r.z.enum(["SCRAP","ADJUST","HOLD"]),code:r.z.string().min(1),description:r.z.string().optional()}),d=l.partial(),c=r.z.object({siteId:r.z.string().min(1),eventType:r.z.enum(["RECEIVE","MOVE","ISSUE_TO_WORKCELL","RETURN","SCRAP","HOLD","RELEASE","COUNT","ADJUST"]),itemId:r.z.string().min(1),qtyEntered:r.z.number().positive(),uomEntered:r.z.enum(o),fromLocationId:r.z.string().optional(),toLocationId:r.z.string().optional(),workcellId:r.z.string().optional(),referenceId:r.z.string().optional(),reasonCodeId:r.z.string().optional(),notes:r.z.string().optional(),deviceId:r.z.string().optional()})}};var t=require("../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[276,564,410,773],()=>n(9439));module.exports=r})();