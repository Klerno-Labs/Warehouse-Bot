"use strict";(()=>{var e={};e.id=380,e.ids=[380],e.modules={7096:e=>{e.exports=require("bcrypt")},2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4770:e=>{e.exports=require("crypto")},4838:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>j,requestAsyncStorage:()=>w,routeModule:()=>m,serverHooks:()=>g,staticGenerationAsyncStorage:()=>f});var s={};r.r(s),r.d(s,{PATCH:()=>x});var n=r(9303),a=r(8716),o=r(670),i=r(7070),u=r(7096),d=r.n(u),p=r(7630),l=r(5010),c=r(7773);async function x(e,{params:t}){let r=await (0,c.a8)();if(!r)return i.NextResponse.json({error:"Unauthorized"},{status:401});if("Admin"!==r.user.role)return i.NextResponse.json({error:"Forbidden"},{status:403});let s=await p.t.getUser(t.id);if(!s||s.tenantId!==r.user.tenantId)return i.NextResponse.json({error:"User not found"},{status:404});let n=await e.json();delete n.id,delete n.tenantId,n.password&&(n.password=await d().hash(n.password,10));let a=await p.t.updateUser(t.id,n);if(await (0,l.U)(r.user.tenantId,r.user.id,"UPDATE","User",t.id,`Updated user ${s.email}`),!a)return i.NextResponse.json({error:"User not found"},{status:404});let{password:o,...u}=a;return i.NextResponse.json(u)}let m=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/users/[id]/route",pathname:"/api/users/[id]",filename:"route",bundlePath:"app/api/users/[id]/route"},resolvedPagePath:"C:\\Users\\Somli\\OneDrive\\Desktop\\My Apps\\Warehouse Builder\\app\\api\\users\\[id]\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:w,staticGenerationAsyncStorage:f,serverHooks:g}=m,h="/api/users/[id]/route";function j(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:f})}},5010:(e,t,r)=>{r.d(t,{U:()=>n});var s=r(7630);async function n(e,t,r,n,a,o,i){await s.t.createAuditEvent({tenantId:e,userId:t,action:r,entityType:n,entityId:a,details:o,ipAddress:i||null})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,564,773],()=>r(4838));module.exports=s})();