"use strict";(()=>{var e={};e.id=866,e.ids=[866],e.modules={7096:e=>{e.exports=require("bcrypt")},2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4770:e=>{e.exports=require("crypto")},7248:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>f,patchFetch:()=>g,requestAsyncStorage:()=>m,routeModule:()=>x,serverHooks:()=>y,staticGenerationAsyncStorage:()=>j});var r={};n.r(r),n.d(r,{GET:()=>l,PATCH:()=>c});var s=n(9303),a=n(8716),o=n(670),u=n(7070),i=n(7630),d=n(5010),p=n(7773);async function l(){let e=await (0,p.a8)();if(!e)return u.NextResponse.json({error:"Unauthorized"},{status:401});let t=await i.t.getTenant(e.user.tenantId);return t?u.NextResponse.json({enabledModules:t.enabledModules}):u.NextResponse.json({error:"Tenant not found"},{status:404})}async function c(e){let t=await (0,p.a8)();if(!t)return u.NextResponse.json({error:"Unauthorized"},{status:401});if("Admin"!==t.user.role)return u.NextResponse.json({error:"Forbidden"},{status:403});let{enabledModules:n}=await e.json();if(!Array.isArray(n))return u.NextResponse.json({error:"enabledModules must be an array"},{status:400});let r=await i.t.updateTenant(t.user.tenantId,{enabledModules:n});return await (0,d.U)(t.user.tenantId,t.user.id,"UPDATE","Tenant",t.user.tenantId,`Updated enabled modules: ${n.join(", ")}`),u.NextResponse.json({enabledModules:r?.enabledModules})}let x=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/tenant/modules/route",pathname:"/api/tenant/modules",filename:"route",bundlePath:"app/api/tenant/modules/route"},resolvedPagePath:"C:\\Users\\Somli\\OneDrive\\Desktop\\My Apps\\Warehouse Builder\\app\\api\\tenant\\modules\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:j,serverHooks:y}=x,f="/api/tenant/modules/route";function g(){return(0,o.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:j})}},5010:(e,t,n)=>{n.d(t,{U:()=>s});var r=n(7630);async function s(e,t,n,s,a,o,u){await r.t.createAuditEvent({tenantId:e,userId:t,action:n,entityType:s,entityId:a,details:o,ipAddress:u||null})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[276,564,773],()=>n(7248));module.exports=r})();